(()=>{var dl=Object.create;var To=Object.defineProperty;var fl=Object.getOwnPropertyDescriptor;var pl=Object.getOwnPropertyNames;var ml=Object.getPrototypeOf,gl=Object.prototype.hasOwnProperty;var k=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var _l=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pl(e))!gl.call(n,i)&&i!==t&&To(n,i,{get:()=>e[i],enumerable:!(r=fl(e,i))||r.enumerable});return n};var yl=(n,e,t)=>(t=n!=null?dl(ml(n)):{},_l(e||!n||!n.__esModule?To(t,"default",{value:n,enumerable:!0}):t,n));var cu=k((H_,au)=>{au.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Ve=k(Xe=>{var Qs,Rp=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Xe.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Xe.getSymbolTotalCodewords=function(e){return Rp[e]};Xe.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Xe.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Qs=e};Xe.isKanjiModeEnabled=function(){return typeof Qs<"u"};Xe.toSJIS=function(e){return Qs(e)}});var Tr=k(ie=>{ie.L={bit:1};ie.M={bit:0};ie.Q={bit:3};ie.H={bit:2};function Pp(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return ie.L;case"m":case"medium":return ie.M;case"q":case"quartile":return ie.Q;case"h":case"high":return ie.H;default:throw new Error("Unknown EC Level: "+n)}}ie.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};ie.from=function(e,t){if(ie.isValid(e))return e;try{return Pp(e)}catch{return t}}});var hu=k((W_,lu)=>{function uu(){this.buffer=[],this.length=0}uu.prototype={get:function(n){let e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};lu.exports=uu});var fu=k((G_,du)=>{function Zt(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}Zt.prototype.set=function(n,e,t,r){let i=n*this.size+e;this.data[i]=t,r&&(this.reservedBit[i]=!0)};Zt.prototype.get=function(n,e){return this.data[n*this.size+e]};Zt.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};Zt.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};du.exports=Zt});var pu=k(vr=>{var Cp=Ve().getSymbolSize;vr.getRowColCoords=function(e){if(e===1)return[];let t=Math.floor(e/7)+2,r=Cp(e),i=r===145?26:Math.ceil((r-13)/(2*t-2))*2,s=[r-7];for(let o=1;o<t-1;o++)s[o]=s[o-1]-i;return s.push(6),s.reverse()};vr.getPositions=function(e){let t=[],r=vr.getRowColCoords(e),i=r.length;for(let s=0;s<i;s++)for(let o=0;o<i;o++)s===0&&o===0||s===0&&o===i-1||s===i-1&&o===0||t.push([r[s],r[o]]);return t}});var _u=k(gu=>{var kp=Ve().getSymbolSize,mu=7;gu.getPositions=function(e){let t=kp(e);return[[0,0],[t-mu,0],[0,t-mu]]}});var yu=k(N=>{N.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Ze={N1:3,N2:3,N3:40,N4:10};N.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};N.from=function(e){return N.isValid(e)?parseInt(e,10):void 0};N.getPenaltyN1=function(e){let t=e.size,r=0,i=0,s=0,o=null,a=null;for(let c=0;c<t;c++){i=s=0,o=a=null;for(let d=0;d<t;d++){let g=e.get(c,d);g===o?i++:(i>=5&&(r+=Ze.N1+(i-5)),o=g,i=1),g=e.get(d,c),g===a?s++:(s>=5&&(r+=Ze.N1+(s-5)),a=g,s=1)}i>=5&&(r+=Ze.N1+(i-5)),s>=5&&(r+=Ze.N1+(s-5))}return r};N.getPenaltyN2=function(e){let t=e.size,r=0;for(let i=0;i<t-1;i++)for(let s=0;s<t-1;s++){let o=e.get(i,s)+e.get(i,s+1)+e.get(i+1,s)+e.get(i+1,s+1);(o===4||o===0)&&r++}return r*Ze.N2};N.getPenaltyN3=function(e){let t=e.size,r=0,i=0,s=0;for(let o=0;o<t;o++){i=s=0;for(let a=0;a<t;a++)i=i<<1&2047|e.get(o,a),a>=10&&(i===1488||i===93)&&r++,s=s<<1&2047|e.get(a,o),a>=10&&(s===1488||s===93)&&r++}return r*Ze.N3};N.getPenaltyN4=function(e){let t=0,r=e.data.length;for(let s=0;s<r;s++)t+=e.data[s];return Math.abs(Math.ceil(t*100/r/5)-10)*Ze.N4};function Np(n,e,t){switch(n){case N.Patterns.PATTERN000:return(e+t)%2===0;case N.Patterns.PATTERN001:return e%2===0;case N.Patterns.PATTERN010:return t%3===0;case N.Patterns.PATTERN011:return(e+t)%3===0;case N.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case N.Patterns.PATTERN101:return e*t%2+e*t%3===0;case N.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case N.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}N.applyMask=function(e,t){let r=t.size;for(let i=0;i<r;i++)for(let s=0;s<r;s++)t.isReserved(s,i)||t.xor(s,i,Np(e,s,i))};N.getBestMask=function(e,t){let r=Object.keys(N.Patterns).length,i=0,s=1/0;for(let o=0;o<r;o++){t(o),N.applyMask(o,e);let a=N.getPenaltyN1(e)+N.getPenaltyN2(e)+N.getPenaltyN3(e)+N.getPenaltyN4(e);N.applyMask(o,e),a<s&&(s=a,i=o)}return i}});var Zs=k(Xs=>{var Me=Tr(),br=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ar=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Xs.getBlocksCount=function(e,t){switch(t){case Me.L:return br[(e-1)*4+0];case Me.M:return br[(e-1)*4+1];case Me.Q:return br[(e-1)*4+2];case Me.H:return br[(e-1)*4+3];default:return}};Xs.getTotalCodewordsCount=function(e,t){switch(t){case Me.L:return Ar[(e-1)*4+0];case Me.M:return Ar[(e-1)*4+1];case Me.Q:return Ar[(e-1)*4+2];case Me.H:return Ar[(e-1)*4+3];default:return}}});var wu=k(Rr=>{var en=new Uint8Array(512),Sr=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)en[t]=e,Sr[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)en[t]=en[t-255]})();Rr.log=function(e){if(e<1)throw new Error("log("+e+")");return Sr[e]};Rr.exp=function(e){return en[e]};Rr.mul=function(e,t){return e===0||t===0?0:en[Sr[e]+Sr[t]]}});var Iu=k(tn=>{var eo=wu();tn.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let s=0;s<t.length;s++)r[i+s]^=eo.mul(e[i],t[s]);return r};tn.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let i=r[0];for(let o=0;o<t.length;o++)r[o]^=eo.mul(t[o],i);let s=0;for(;s<r.length&&r[s]===0;)s++;r=r.slice(s)}return r};tn.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=tn.mul(t,new Uint8Array([1,eo.exp(r)]));return t}});var vu=k((ey,Tu)=>{var Eu=Iu();function to(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}to.prototype.initialize=function(e){this.degree=e,this.genPoly=Eu.generateECPolynomial(this.degree)};to.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=Eu.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){let s=new Uint8Array(this.degree);return s.set(r,i),s}return r};Tu.exports=to});var no=k(bu=>{bu.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var ro=k(Te=>{var Au="[0-9]+",Op="[A-Z $%*+\\-./:]+",nn="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";nn=nn.replace(/u/g,"\\u");var Dp="(?:(?![A-Z0-9 $%*+\\-./:]|"+nn+`)(?:.|[\r
]))+`;Te.KANJI=new RegExp(nn,"g");Te.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Te.BYTE=new RegExp(Dp,"g");Te.NUMERIC=new RegExp(Au,"g");Te.ALPHANUMERIC=new RegExp(Op,"g");var Lp=new RegExp("^"+nn+"$"),Vp=new RegExp("^"+Au+"$"),Mp=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Te.testKanji=function(e){return Lp.test(e)};Te.testNumeric=function(e){return Vp.test(e)};Te.testAlphanumeric=function(e){return Mp.test(e)}});var xe=k(M=>{var xp=no(),io=ro();M.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};M.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};M.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};M.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};M.MIXED={bit:-1};M.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!xp.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]};M.getBestModeForData=function(e){return io.testNumeric(e)?M.NUMERIC:io.testAlphanumeric(e)?M.ALPHANUMERIC:io.testKanji(e)?M.KANJI:M.BYTE};M.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};M.isValid=function(e){return e&&e.bit&&e.ccBits};function Up(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return M.NUMERIC;case"alphanumeric":return M.ALPHANUMERIC;case"kanji":return M.KANJI;case"byte":return M.BYTE;default:throw new Error("Unknown mode: "+n)}}M.from=function(e,t){if(M.isValid(e))return e;try{return Up(e)}catch{return t}}});var ku=k(et=>{var Pr=Ve(),Fp=Zs(),Su=Tr(),Ue=xe(),so=no(),Pu=7973,Ru=Pr.getBCHDigit(Pu);function Bp(n,e,t){for(let r=1;r<=40;r++)if(e<=et.getCapacity(r,t,n))return r}function Cu(n,e){return Ue.getCharCountIndicator(n,e)+4}function qp(n,e){let t=0;return n.forEach(function(r){let i=Cu(r.mode,e);t+=i+r.getBitsLength()}),t}function $p(n,e){for(let t=1;t<=40;t++)if(qp(n,t)<=et.getCapacity(t,e,Ue.MIXED))return t}et.from=function(e,t){return so.isValid(e)?parseInt(e,10):t};et.getCapacity=function(e,t,r){if(!so.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Ue.BYTE);let i=Pr.getSymbolTotalCodewords(e),s=Fp.getTotalCodewordsCount(e,t),o=(i-s)*8;if(r===Ue.MIXED)return o;let a=o-Cu(r,e);switch(r){case Ue.NUMERIC:return Math.floor(a/10*3);case Ue.ALPHANUMERIC:return Math.floor(a/11*2);case Ue.KANJI:return Math.floor(a/13);case Ue.BYTE:default:return Math.floor(a/8)}};et.getBestVersionForData=function(e,t){let r,i=Su.from(t,Su.M);if(Array.isArray(e)){if(e.length>1)return $p(e,i);if(e.length===0)return 1;r=e[0]}else r=e;return Bp(r.mode,r.getLength(),i)};et.getEncodedBits=function(e){if(!so.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;Pr.getBCHDigit(t)-Ru>=0;)t^=Pu<<Pr.getBCHDigit(t)-Ru;return e<<12|t}});var Lu=k(Du=>{var oo=Ve(),Ou=1335,Hp=21522,Nu=oo.getBCHDigit(Ou);Du.getEncodedBits=function(e,t){let r=e.bit<<3|t,i=r<<10;for(;oo.getBCHDigit(i)-Nu>=0;)i^=Ou<<oo.getBCHDigit(i)-Nu;return(r<<10|i)^Hp}});var Mu=k((oy,Vu)=>{var jp=xe();function gt(n){this.mode=jp.NUMERIC,this.data=n.toString()}gt.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};gt.prototype.getLength=function(){return this.data.length};gt.prototype.getBitsLength=function(){return gt.getBitsLength(this.data.length)};gt.prototype.write=function(e){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),e.put(i,10);let s=this.data.length-t;s>0&&(r=this.data.substr(t),i=parseInt(r,10),e.put(i,s*3+1))};Vu.exports=gt});var Uu=k((ay,xu)=>{var zp=xe(),ao=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function _t(n){this.mode=zp.ALPHANUMERIC,this.data=n}_t.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};_t.prototype.getLength=function(){return this.data.length};_t.prototype.getBitsLength=function(){return _t.getBitsLength(this.data.length)};_t.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=ao.indexOf(this.data[t])*45;r+=ao.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(ao.indexOf(this.data[t]),6)};xu.exports=_t});var Bu=k((cy,Fu)=>{var Wp=xe();function yt(n){this.mode=Wp.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}yt.getBitsLength=function(e){return e*8};yt.prototype.getLength=function(){return this.data.length};yt.prototype.getBitsLength=function(){return yt.getBitsLength(this.data.length)};yt.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};Fu.exports=yt});var $u=k((uy,qu)=>{var Gp=xe(),Kp=Ve();function wt(n){this.mode=Gp.KANJI,this.data=n}wt.getBitsLength=function(e){return e*13};wt.prototype.getLength=function(){return this.data.length};wt.prototype.getBitsLength=function(){return wt.getBitsLength(this.data.length)};wt.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=Kp.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};qu.exports=wt});var Hu=k((ly,co)=>{"use strict";var rn={single_source_shortest_paths:function(n,e,t){var r={},i={};i[e]=0;var s=rn.PriorityQueue.make();s.push(e,0);for(var o,a,c,d,g,w,y,b,v;!s.empty();){o=s.pop(),a=o.value,d=o.cost,g=n[a]||{};for(c in g)g.hasOwnProperty(c)&&(w=g[c],y=d+w,b=i[c],v=typeof i[c]>"u",(v||b>y)&&(i[c]=y,s.push(c,y),r[c]=a))}if(typeof t<"u"&&typeof i[t]>"u"){var C=["Could not find a path from ",e," to ",t,"."].join("");throw new Error(C)}return r},extract_shortest_path_from_predecessor_list:function(n,e){for(var t=[],r=e,i;r;)t.push(r),i=n[r],r=n[r];return t.reverse(),t},find_path:function(n,e,t){var r=rn.single_source_shortest_paths(n,e,t);return rn.extract_shortest_path_from_predecessor_list(r,t)},PriorityQueue:{make:function(n){var e=rn.PriorityQueue,t={},r;n=n||{};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t.queue=[],t.sorter=n.sorter||e.default_sorter,t},default_sorter:function(n,e){return n.cost-e.cost},push:function(n,e){var t={value:n,cost:e};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof co<"u"&&(co.exports=rn)});var Qu=k(It=>{var P=xe(),Wu=Mu(),Gu=Uu(),Ku=Bu(),Ju=$u(),sn=ro(),Cr=Ve(),Jp=Hu();function ju(n){return unescape(encodeURIComponent(n)).length}function on(n,e,t){let r=[],i;for(;(i=n.exec(t))!==null;)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function Yu(n){let e=on(sn.NUMERIC,P.NUMERIC,n),t=on(sn.ALPHANUMERIC,P.ALPHANUMERIC,n),r,i;return Cr.isKanjiModeEnabled()?(r=on(sn.BYTE,P.BYTE,n),i=on(sn.KANJI,P.KANJI,n)):(r=on(sn.BYTE_KANJI,P.BYTE,n),i=[]),e.concat(t,r,i).sort(function(o,a){return o.index-a.index}).map(function(o){return{data:o.data,mode:o.mode,length:o.length}})}function uo(n,e){switch(e){case P.NUMERIC:return Wu.getBitsLength(n);case P.ALPHANUMERIC:return Gu.getBitsLength(n);case P.KANJI:return Ju.getBitsLength(n);case P.BYTE:return Ku.getBitsLength(n)}}function Yp(n){return n.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function Qp(n){let e=[];for(let t=0;t<n.length;t++){let r=n[t];switch(r.mode){case P.NUMERIC:e.push([r,{data:r.data,mode:P.ALPHANUMERIC,length:r.length},{data:r.data,mode:P.BYTE,length:r.length}]);break;case P.ALPHANUMERIC:e.push([r,{data:r.data,mode:P.BYTE,length:r.length}]);break;case P.KANJI:e.push([r,{data:r.data,mode:P.BYTE,length:ju(r.data)}]);break;case P.BYTE:e.push([{data:r.data,mode:P.BYTE,length:ju(r.data)}])}}return e}function Xp(n,e){let t={},r={start:{}},i=["start"];for(let s=0;s<n.length;s++){let o=n[s],a=[];for(let c=0;c<o.length;c++){let d=o[c],g=""+s+c;a.push(g),t[g]={node:d,lastCount:0},r[g]={};for(let w=0;w<i.length;w++){let y=i[w];t[y]&&t[y].node.mode===d.mode?(r[y][g]=uo(t[y].lastCount+d.length,d.mode)-uo(t[y].lastCount,d.mode),t[y].lastCount+=d.length):(t[y]&&(t[y].lastCount=d.length),r[y][g]=uo(d.length,d.mode)+4+P.getCharCountIndicator(d.mode,e))}}i=a}for(let s=0;s<i.length;s++)r[i[s]].end=0;return{map:r,table:t}}function zu(n,e){let t,r=P.getBestModeForData(n);if(t=P.from(e,r),t!==P.BYTE&&t.bit<r.bit)throw new Error('"'+n+'" cannot be encoded with mode '+P.toString(t)+`.
 Suggested mode is: `+P.toString(r));switch(t===P.KANJI&&!Cr.isKanjiModeEnabled()&&(t=P.BYTE),t){case P.NUMERIC:return new Wu(n);case P.ALPHANUMERIC:return new Gu(n);case P.KANJI:return new Ju(n);case P.BYTE:return new Ku(n)}}It.fromArray=function(e){return e.reduce(function(t,r){return typeof r=="string"?t.push(zu(r,null)):r.data&&t.push(zu(r.data,r.mode)),t},[])};It.fromString=function(e,t){let r=Yu(e,Cr.isKanjiModeEnabled()),i=Qp(r),s=Xp(i,t),o=Jp.find_path(s.map,"start","end"),a=[];for(let c=1;c<o.length-1;c++)a.push(s.table[o[c]].node);return It.fromArray(Yp(a))};It.rawSplit=function(e){return It.fromArray(Yu(e,Cr.isKanjiModeEnabled()))}});var Zu=k(Xu=>{var Nr=Ve(),lo=Tr(),Zp=hu(),em=fu(),tm=pu(),nm=_u(),po=yu(),mo=Zs(),rm=vu(),kr=ku(),im=Lu(),sm=xe(),ho=Qu();function om(n,e){let t=n.size,r=nm.getPositions(e);for(let i=0;i<r.length;i++){let s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||t<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||t<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?n.set(s+a,o+c,!0,!0):n.set(s+a,o+c,!1,!0))}}function am(n){let e=n.size;for(let t=8;t<e-8;t++){let r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function cm(n,e){let t=tm.getPositions(e);for(let r=0;r<t.length;r++){let i=t[r][0],s=t[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?n.set(i+o,s+a,!0,!0):n.set(i+o,s+a,!1,!0)}}function um(n,e){let t=n.size,r=kr.getEncodedBits(e),i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+t-8-3,o=(r>>a&1)===1,n.set(i,s,o,!0),n.set(s,i,o,!0)}function fo(n,e,t){let r=n.size,i=im.getEncodedBits(e,t),s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?n.set(s,8,o,!0):s<8?n.set(s+1,8,o,!0):n.set(r-15+s,8,o,!0),s<8?n.set(8,r-s-1,o,!0):s<9?n.set(8,15-s-1+1,o,!0):n.set(8,15-s-1,o,!0);n.set(r-8,8,1,!0)}function lm(n,e){let t=n.size,r=-1,i=t-1,s=7,o=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!n.isReserved(i,a-c)){let d=!1;o<e.length&&(d=(e[o]>>>s&1)===1),n.set(i,a-c,d),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function hm(n,e,t){let r=new Zp;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),sm.getCharCountIndicator(c.mode,n)),c.write(r)});let i=Nr.getSymbolTotalCodewords(n),s=mo.getTotalCodewordsCount(n,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let a=(o-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return dm(r,n,e)}function dm(n,e,t){let r=Nr.getSymbolTotalCodewords(e),i=mo.getTotalCodewordsCount(e,t),s=r-i,o=mo.getBlocksCount(e,t),a=r%o,c=o-a,d=Math.floor(r/o),g=Math.floor(s/o),w=g+1,y=d-g,b=new rm(y),v=0,C=new Array(o),O=new Array(o),j=0,J=new Uint8Array(n.buffer);for(let f=0;f<o;f++){let u=f<c?g:w;C[f]=J.slice(v,v+u),O[f]=b.encode(C[f]),v+=u,j=Math.max(j,u)}let Y=new Uint8Array(r),me=0,ee,B;for(ee=0;ee<j;ee++)for(B=0;B<o;B++)ee<C[B].length&&(Y[me++]=C[B][ee]);for(ee=0;ee<y;ee++)for(B=0;B<o;B++)Y[me++]=O[B][ee];return Y}function fm(n,e,t,r){let i;if(Array.isArray(n))i=ho.fromArray(n);else if(typeof n=="string"){let d=e;if(!d){let g=ho.rawSplit(n);d=kr.getBestVersionForData(g,t)}i=ho.fromString(n,d||40)}else throw new Error("Invalid data");let s=kr.getBestVersionForData(i,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);let o=hm(e,t,i),a=Nr.getSymbolSize(e),c=new em(a);return om(c,e),am(c),cm(c,e),fo(c,t,0),e>=7&&um(c,e),lm(c,o),isNaN(r)&&(r=po.getBestMask(c,fo.bind(null,c,t))),po.applyMask(r,c),fo(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:i}}Xu.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=lo.M,i,s;return typeof t<"u"&&(r=lo.from(t.errorCorrectionLevel,lo.M),i=kr.from(t.version),s=po.from(t.maskPattern),t.toSJISFunc&&Nr.setToSJISFunction(t.toSJISFunc)),fm(e,i,r,s)}});var go=k(tt=>{function el(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let e=n.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+n);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let t=parseInt(e.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+e.slice(0,6).join("")}}tt.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:el(e.color.dark||"#000000ff"),light:el(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};tt.getScale=function(e,t){return t.width&&t.width>=e+t.margin*2?t.width/(e+t.margin*2):t.scale};tt.getImageWidth=function(e,t){let r=tt.getScale(e,t);return Math.floor((e+t.margin*2)*r)};tt.qrToImageData=function(e,t,r){let i=t.modules.size,s=t.modules.data,o=tt.getScale(i,r),a=Math.floor((i+r.margin*2)*o),c=r.margin*o,d=[r.color.light,r.color.dark];for(let g=0;g<a;g++)for(let w=0;w<a;w++){let y=(g*a+w)*4,b=r.color.light;if(g>=c&&w>=c&&g<a-c&&w<a-c){let v=Math.floor((g-c)/o),C=Math.floor((w-c)/o);b=d[s[v*i+C]?1:0]}e[y++]=b.r,e[y++]=b.g,e[y++]=b.b,e[y]=b.a}}});var tl=k(Or=>{var _o=go();function pm(n,e,t){n.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=t,e.width=t,e.style.height=t+"px",e.style.width=t+"px"}function mm(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Or.render=function(e,t,r){let i=r,s=t;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),t||(s=mm()),i=_o.getOptions(i);let o=_o.getImageWidth(e.modules.size,i),a=s.getContext("2d"),c=a.createImageData(o,o);return _o.qrToImageData(c.data,e,i),pm(a,s,o),a.putImageData(c,0,0),s};Or.renderToDataURL=function(e,t,r){let i=r;typeof i>"u"&&(!t||!t.getContext)&&(i=t,t=void 0),i||(i={});let s=Or.render(e,t,i),o=i.type||"image/png",a=i.rendererOpts||{};return s.toDataURL(o,a.quality)}});var il=k(rl=>{var gm=go();function nl(n,e){let t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function yo(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function _m(n,e,t){let r="",i=0,s=!1,o=0;for(let a=0;a<n.length;a++){let c=Math.floor(a%e),d=Math.floor(a/e);!c&&!s&&(s=!0),n[a]?(o++,a>0&&c>0&&n[a-1]||(r+=s?yo("M",c+t,.5+d+t):yo("m",i,0),i=0,s=!1),c+1<e&&n[a+1]||(r+=yo("h",o),o=0)):i++}return r}rl.render=function(e,t,r){let i=gm.getOptions(t),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+nl(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",d="<path "+nl(i.color.dark,"stroke")+' d="'+_m(o,s,i.margin)+'"/>',g='viewBox="0 0 '+a+" "+a+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+g+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,y),y}});var ol=k(an=>{var ym=cu(),wo=Zu(),sl=tl(),wm=il();function Io(n,e,t,r,i){let s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!ym())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=t,t=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=r=void 0):o===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,d){try{let g=wo.create(t,r);c(n(g,e,r))}catch(g){d(g)}})}try{let c=wo.create(t,r);i(null,n(c,e,r))}catch(c){i(c)}}an.create=wo.create;an.toCanvas=Io.bind(null,sl.render);an.toDataURL=Io.bind(null,sl.renderToDataURL);an.toString=Io.bind(null,function(n,e,t){return wm.render(n,t)})});var wl=typeof document>"u",Lr=class{_virtual;element;constructor(e="div"){this._virtual=wl,this.element=this._virtual?this._vel(e):this.el(e)}el(e){return document.createElement(String(e||"div").toLowerCase())}_vel(e){return{_tag:e,_cls:[],_data:{},_attr:{},_css:{},_child:[],_events:[]}}ref(e){return this._virtual?this:(typeof e=="function"&&e(this.element),this)}},vo=Lr;var Vr=class{_set(e,t,r="_attr"){return t===void 0?this:this._isLockedAttr(e)?this:(this._virtual?r==="txt"?this.element._child.push(String(t)):(this.element[r]??={},this.element[r][e]=t):this.element[e]=t,this)}_isLockedAttr(e){return e==="id"&&this._refLocked}id(e){return this._set("id",e)}val(e){return this._set("value",e)}txt(e){return this._set("textContent",e,"txt")}attr(e={}){for(let[t,r]of Object.entries(e))t.startsWith("on")||this._isLockedAttr(t)||(this._virtual?this.element._attr[t]=r:typeof r=="boolean"?r?this.element.setAttribute(t,""):this.element.removeAttribute(t):r!=null&&this.element.setAttribute(t,r));return this}tgglAttr(e,t){if(!e.startsWith("on"))return typeof t=="boolean"?t?this.element.setAttribute(e,""):this.element.removeAttribute(e):this.element.hasAttribute(e)?this.element.removeAttribute(e):this.element.setAttribute(e,""),this}data(e={}){return Object.entries(e).forEach(([t,r])=>{this._virtual?this.element._data[t]=r:this.element.dataset[t]=r}),this}css(e={}){return this._virtual?Object.assign(this.element._css,e):Object.assign(this.element.style,e),this}},Mr=Vr;var xr=class{_parseClassList(e){return Array.isArray(e)?e.filter(Boolean):String(e).split(" ").filter(Boolean)}cls(e){if(!e)return this;let t=this._parseClassList(e);return this._virtual?this.element._cls.push(...t):this.element.classList.add(...t),this}rmvCls(e){return e&&this.element.classList.remove(...this._parseClassList(e)),this}tgglCls(e,t){return this.element.classList.toggle(e,t),this}},Ur=xr;var Fr=class{_pushVirtualHandler(e,t,r){let i=this.element._events??=[],s=i.find(o=>o.id===e&&o.event===t);s?s.handlers.push(r):i.push({id:e,event:t,handlers:[r]})}on(e,t,r={}){if(!e||!t)return this;if(this._virtual){if(r.ssg===!1)return this;let i=this.element._attr?.id;if(!i)throw new Error("[Domo.on] .id() must be called before .on(...) in SSG mode");if(typeof e=="object")for(let[s,o]of Object.entries(e)){let a=Array.isArray(o)?o[0]:o;this._pushVirtualHandler(i,s,{type:"direct",handler:a})}else this._pushVirtualHandler(i,e,{type:"direct",handler:t});return this}if(typeof e=="object"&&e!==null){for(let[i,s]of Object.entries(e))if(typeof s=="function")this.element.addEventListener(i,s);else if(Array.isArray(s)){let[o,a]=s;this.element.addEventListener(i,o,a)}}else this.element.addEventListener(e,t,r);return this}_handleClosest(e,t){for(let[r,i]of Object.entries(t)){let s=e.target.closest(r);s&&i(e,s)}}onClosest(e,t={},r={}){if(this._virtual&&e!==null){if(r.ssg===!1)return this;let i=this.element._attr?.id;if(!i)throw new Error("[Domo.onClosest] .id() must be called before .onClosest(...) in SSG mode");for(let[s,o]of Object.entries(t))this._pushVirtualHandler(i,e,{type:"closest",selector:s,handler:o});return this}return this.on(e,i=>this._handleClosest(i,t),r)}_handleMatches(e,t){for(let[r,i]of Object.entries(t))e.target.matches(r)&&i(e,e.target)}onMatch(e,t={},r={}){if(this._virtual&&e!==null){if(r.ssg===!1)return this;let i=this.element._attr?.id;if(!i)throw new Error("[Domo.onMatch] .id() must be called before .onMatch(...) in SSG mode");for(let[s,o]of Object.entries(t))this._pushVirtualHandler(i,e,{type:"match",selector:s,handler:o});return this}return this.on(e,i=>this._handleMatches(i,t),r)}},Br=Fr;var qr=class{_handleElementInstance(e){return e instanceof Q?e.build():e instanceof DocumentFragment||e instanceof Node?e:typeof e=="string"||typeof e=="number"?document.createTextNode(e):document.createTextNode(`\u26A0 Invalid child: ${String(e)}`)}child(e=[]){return e.flat().forEach(r=>{this._virtual?this.element._child.push(r instanceof Q?r:String(r)):this.element.appendChild(this._handleElementInstance(r))}),this}append(e=[]){return this.child(e)}appendTo(e){let t=e instanceof Q?e.element:e;return t instanceof Node&&t.appendChild(this.element),this}parent(e){return this.appendTo(e)}clear(){return this.element.replaceChildren(),this}replace(e,t){let r=this._handleElementInstance(t),i=e;return i===this.element?(this.element.replaceWith(r),this.element=r):this.element.contains(i)&&i.replaceWith(r),this}show(e=!0,t="block"){return this.element.style.display=e?t:"none",this}if(e){return e?this:new Q("if").attr({hidden:!0}).data({if:this._virtual?this.element._tag.toLowerCase():this.element.tagName.toLowerCase()})}},$r=qr;var Hr=class{build(){if(!this._virtual)return this.element;let e=this.element._tag,t=this.element._cls.join(" "),r=g=>g.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=Object.entries(this.element._css).map(([g,w])=>`${r(g)}:${w}`).join(";"),s=Object.entries(this.element._attr).map(([g,w])=>w===!0?g:`${g}="${String(w).replace(/"/g,"&quot;")}"`),o=Object.entries(this.element._data).map(([g,w])=>`data-${g}="${String(w).replace(/"/g,"&quot;")}"`);t&&s.push(`class="${t}"`),i&&s.push(`style="${i}"`);let a=g=>String(g).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=s.concat(o).join(" "),d=this.element._child.map(g=>typeof g=="string"?a(g):g.build?.()||"").join("");return`<${e}${c?" "+c:""}>${d}</${e}>`}},jr=Hr;var Q=class extends vo{constructor(e="div"){super(e)}};Object.getOwnPropertyNames(Mr.prototype).filter(n=>n!=="constructor").forEach(n=>{Q.prototype[n]=Mr.prototype[n]});Object.getOwnPropertyNames(Ur.prototype).filter(n=>n!=="constructor").forEach(n=>{Q.prototype[n]=Ur.prototype[n]});Object.getOwnPropertyNames(Br.prototype).filter(n=>n!=="constructor").forEach(n=>{Q.prototype[n]=Br.prototype[n]});Object.getOwnPropertyNames($r.prototype).filter(n=>n!=="constructor").forEach(n=>{Q.prototype[n]=$r.prototype[n]});Object.getOwnPropertyNames(jr.prototype).filter(n=>n!=="constructor").forEach(n=>{Q.prototype[n]=jr.prototype[n]});function Il(n="div"){return new Q(n)}var S=Il;var bo=()=>{};var Ro=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},El=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Po={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,g=s>>2,w=(s&3)<<4|a>>4,y=(a&15)<<2|d>>6,b=d&63;c||(b=64,o||(y=64)),r.push(t[g],t[w],t[y],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ro(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):El(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let w=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||w==null)throw new Wr;let y=s<<2|a>>4;if(r.push(y),d!==64){let b=a<<4&240|d>>2;if(r.push(b),w!==64){let v=d<<6&192|w;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Wr=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Tl=function(n){let e=Ro(n);return Po.encodeByteArray(e,!0)},Tt=function(n){return Tl(n).replace(/\./g,"")},un=function(n){try{return Po.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vl(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bl=()=>vl().__FIREBASE_DEFAULTS__,Al=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Sl=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&un(n[1]);return e&&JSON.parse(e)},Kr=()=>{try{return bo()||bl()||Al()||Sl()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Jr=n=>Kr()?.emulatorHosts?.[n],Co=n=>{let e=Jr(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Yr=()=>Kr()?.config,Qr=n=>Kr()?.[`_${n}`];var cn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ve(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ln(n){return(await fetch(n,{credentials:"include"})).ok}function ko(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Tt(JSON.stringify(t)),Tt(JSON.stringify(o)),""].join(".")}var Et={};function Rl(){let n={prod:[],emulator:[]};for(let e of Object.keys(Et))Et[e]?n.emulator.push(e):n.prod.push(e);return n}function Pl(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Ao=!1;function hn(n,e){if(typeof window>"u"||typeof document>"u"||!ve(window.location.host)||Et[n]===e||Et[n]||Ao)return;Et[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=Rl().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Ao=!0,o()},y}function g(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function w(){let y=Pl(r),b=t("text"),v=document.getElementById(b)||document.createElement("span"),C=t("learnmore"),O=document.getElementById(C)||document.createElement("a"),j=t("preprendIcon"),J=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let Y=y.element;a(Y),g(O,C);let me=d();c(J,j),Y.append(J,v,O,me),document.body.appendChild(Y)}s?(v.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function q(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function No(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(q())}function Oo(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Do(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Lo(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Vo(){let n=q();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Mo(){try{return typeof indexedDB=="object"}catch{return!1}}function xo(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var Cl="FirebaseError",X=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Cl,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}},ge=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?kl(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new X(i,a,r)}};function kl(n,e){return n.replace(Nl,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Nl=/\{\$([^}]+)}/g;function Uo(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ce(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(So(s)&&So(o)){if(!ce(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function So(n){return n!==null&&typeof n=="object"}function nt(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rt(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function it(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Fo(n,e){let t=new Gr(n,e);return t.subscribe.bind(t)}var Gr=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ol(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zr),i.error===void 0&&(i.error=zr),i.complete===void 0&&(i.complete=zr);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ol(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zr(){}var Bm=14400*1e3;function F(n){return n&&n._delegate?n._delegate:n}var te=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Be="[DEFAULT]";var Xr=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new cn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ll(e))try{this.getOrInitializeService({instanceIdentifier:Be})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Be){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Be){return this.instances.has(e)}getOptions(e=Be){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dl(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Be){return this.component?this.component.multipleInstances?e:Be:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Dl(n){return n===Be?void 0:n}function Ll(n){return n.instantiationMode==="EAGER"}var dn=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Xr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Vl=[],R;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(R||(R={}));var Ml={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},xl=R.INFO,Ul={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},Fl=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Ul[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},be=class{constructor(e){this.name=e,this._logLevel=xl,this._logHandler=Fl,this._userLogHandler=null,Vl.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in R))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ml[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...e),this._logHandler(this,R.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...e),this._logHandler(this,R.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,R.INFO,...e),this._logHandler(this,R.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,R.WARN,...e),this._logHandler(this,R.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,R.ERROR,...e),this._logHandler(this,R.ERROR,...e)}};var Bl=(n,e)=>e.some(t=>n instanceof t),Bo,qo;function ql(){return Bo||(Bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $l(){return qo||(qo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $o=new WeakMap,ei=new WeakMap,Ho=new WeakMap,Zr=new WeakMap,ni=new WeakMap;function Hl(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ue(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&$o.set(t,n)}).catch(()=>{}),ni.set(e,n),e}function jl(n){if(ei.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ei.set(n,e)}var ti={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ei.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ho.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ue(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function jo(n){ti=n(ti)}function zl(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(fn(this),e,...t);return Ho.set(r,e.sort?e.sort():[e]),ue(r)}:$l().includes(n)?function(...e){return n.apply(fn(this),e),ue($o.get(this))}:function(...e){return ue(n.apply(fn(this),e))}}function Wl(n){return typeof n=="function"?zl(n):(n instanceof IDBTransaction&&jl(n),Bl(n,ql())?new Proxy(n,ti):n)}function ue(n){if(n instanceof IDBRequest)return Hl(n);if(Zr.has(n))return Zr.get(n);let e=Wl(n);return e!==n&&(Zr.set(n,e),ni.set(e,n)),e}var fn=n=>ni.get(n);function Wo(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=ue(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ue(o.result),c.oldVersion,c.newVersion,ue(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var Gl=["get","getKey","getAll","getAllKeys","count"],Kl=["put","add","delete","clear"],ri=new Map;function zo(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ri.get(e))return ri.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Kl.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Gl.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[t](...a),i&&c.done]))[0]};return ri.set(e,s),s}jo(n=>({...n,get:(e,t,r)=>zo(e,t)||n.get(e,t,r),has:(e,t)=>!!zo(e,t)||n.has(e,t)}));var si=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Jl(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Jl(n){return n.getComponent()?.type==="VERSION"}var oi="@firebase/app",Go="0.14.6";var _e=new be("@firebase/app"),Yl="@firebase/app-compat",Ql="@firebase/analytics-compat",Xl="@firebase/analytics",Zl="@firebase/app-check-compat",eh="@firebase/app-check",th="@firebase/auth",nh="@firebase/auth-compat",rh="@firebase/database",ih="@firebase/data-connect",sh="@firebase/database-compat",oh="@firebase/functions",ah="@firebase/functions-compat",ch="@firebase/installations",uh="@firebase/installations-compat",lh="@firebase/messaging",hh="@firebase/messaging-compat",dh="@firebase/performance",fh="@firebase/performance-compat",ph="@firebase/remote-config",mh="@firebase/remote-config-compat",gh="@firebase/storage",_h="@firebase/storage-compat",yh="@firebase/firestore",wh="@firebase/ai",Ih="@firebase/firestore-compat",Eh="firebase",Th="12.6.0";var ai="[DEFAULT]",vh={[oi]:"fire-core",[Yl]:"fire-core-compat",[Xl]:"fire-analytics",[Ql]:"fire-analytics-compat",[eh]:"fire-app-check",[Zl]:"fire-app-check-compat",[th]:"fire-auth",[nh]:"fire-auth-compat",[rh]:"fire-rtdb",[ih]:"fire-data-connect",[sh]:"fire-rtdb-compat",[oh]:"fire-fn",[ah]:"fire-fn-compat",[ch]:"fire-iid",[uh]:"fire-iid-compat",[lh]:"fire-fcm",[hh]:"fire-fcm-compat",[dh]:"fire-perf",[fh]:"fire-perf-compat",[ph]:"fire-rc",[mh]:"fire-rc-compat",[gh]:"fire-gcs",[_h]:"fire-gcs-compat",[yh]:"fire-fst",[Ih]:"fire-fst-compat",[wh]:"fire-vertex","fire-js":"fire-js",[Eh]:"fire-js-all"};var pn=new Map,bh=new Map,ci=new Map;function Ko(n,e){try{n.container.addComponent(e)}catch(t){_e.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Se(n){let e=n.name;if(ci.has(e))return _e.debug(`There were multiple attempts to register component ${e}.`),!1;ci.set(e,n);for(let t of pn.values())Ko(t,n);for(let t of bh.values())Ko(t,n);return!0}function bt(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Z(n){return n==null?!1:n.settings!==void 0}var Ah={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ae=new ge("app","Firebase",Ah);var ui=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new te("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ae.create("app-deleted",{appName:this._name})}};var Re=Th;function di(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r={name:ai,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ae.create("bad-app-name",{appName:String(i)});if(t||(t=Yr()),!t)throw Ae.create("no-options");let s=pn.get(i);if(s){if(ce(t,s.options)&&ce(r,s.config))return s;throw Ae.create("duplicate-app",{appName:i})}let o=new dn(i);for(let c of ci.values())o.addComponent(c);let a=new ui(t,r,o);return pn.set(i,a),a}function mn(n=ai){let e=pn.get(n);if(!e&&n===ai&&Yr())return di();if(!e)throw Ae.create("no-app",{appName:n});return e}function se(n,e,t){let r=vh[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_e.warn(o.join(" "));return}Se(new te(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Sh="firebase-heartbeat-database",Rh=1,vt="firebase-heartbeat-store",ii=null;function Xo(){return ii||(ii=Wo(Sh,Rh,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vt)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ae.create("idb-open",{originalErrorMessage:n.message})})),ii}async function Ph(n){try{let t=(await Xo()).transaction(vt),r=await t.objectStore(vt).get(Zo(n));return await t.done,r}catch(e){if(e instanceof X)_e.warn(e.message);else{let t=Ae.create("idb-get",{originalErrorMessage:e?.message});_e.warn(t.message)}}}async function Jo(n,e){try{let r=(await Xo()).transaction(vt,"readwrite");await r.objectStore(vt).put(e,Zo(n)),await r.done}catch(t){if(t instanceof X)_e.warn(t.message);else{let r=Ae.create("idb-set",{originalErrorMessage:t?.message});_e.warn(r.message)}}}function Zo(n){return`${n.name}!${n.options.appId}`}var Ch=1024,kh=30,li=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new hi(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Yo();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>kh){let i=Oh(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_e.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Yo(),{heartbeatsToSend:t,unsentEntries:r}=Nh(this._heartbeatsCache.heartbeats),i=Tt(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return _e.warn(e),""}}};function Yo(){return new Date().toISOString().substring(0,10)}function Nh(n,e=Ch){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Qo(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Qo(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var hi=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mo()?xo().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Ph(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Jo(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Jo(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function Qo(n){return Tt(JSON.stringify({version:2,heartbeats:n})).length}function Oh(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Dh(n){Se(new te("platform-logger",e=>new si(e),"PRIVATE")),Se(new te("heartbeat",e=>new li(e),"PRIVATE")),se(oi,Go,n),se(oi,Go,"esm2020"),se("fire-js","")}Dh("");var Lh="firebase",Vh="12.6.0";se(Lh,Vh,"app");function ya(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wa=ya,Ia=new ge("auth","Firebase",ya());var Tn=new be("@firebase/auth");function Mh(n,...e){Tn.logLevel<=R.WARN&&Tn.warn(`Auth (${Re}): ${n}`,...e)}function _n(n,...e){Tn.logLevel<=R.ERROR&&Tn.error(`Auth (${Re}): ${n}`,...e)}function ne(n,...e){throw xi(n,...e)}function oe(n,...e){return xi(n,...e)}function Mi(n,e,t){let r={...wa(),[e]:t};return new ge("auth","Firebase",r).create(e,{appName:n.name})}function qe(n){return Mi(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xh(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ne(n,"argument-error"),Mi(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xi(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ia.create(n,...e)}function I(n,e,...t){if(!n)throw xi(e,...t)}function le(n){let e="INTERNAL ASSERTION FAILED: "+n;throw _n(e),new Error(e)}function we(n,e){n||le(e)}function yi(){return typeof self<"u"&&self.location?.href||""}function Uh(){return ea()==="http:"||ea()==="https:"}function ea(){return typeof self<"u"&&self.location?.protocol||null}function Fh(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Uh()||Do()||"connection"in navigator)?navigator.onLine:!0}function Bh(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var $e=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,we(t>e,"Short delay should be less than long delay!"),this.isMobile=No()||Lo()}get(){return Fh()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ui(n,e){we(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var vn=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var qh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var $h=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hh=new $e(3e4,6e4);function x(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function $(n,e,t,r,i={}){return Ea(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=nt({key:n.config.apiKey,...o}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let d={method:e,headers:c,...s};return Oo()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&ve(n.emulatorConfig.host)&&(d.credentials="include"),vn.fetch()(await Ta(n,n.config.apiHost,t,a),d)})}async function Ea(n,e,t){n._canInitEmulator=!1;let r={...qh,...e};try{let i=new wi(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw St(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw St(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw St(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw St(n,"user-disabled",o);let g=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Mi(n,g,d);ne(n,g)}}catch(i){if(i instanceof X)throw i;ne(n,"network-request-failed",{message:String(i)})}}async function Ke(n,e,t,r,i={}){let s=await $(n,e,t,r,i);return"mfaPendingCredential"in s&&ne(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function Ta(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Ui(n.config,i):`${n.config.apiScheme}://${i}`;return $h.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function jh(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var wi=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(oe(this.auth,"network-request-failed")),Hh.get())})}};function St(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=oe(n,e,r);return i.customData._tokenResponse=t,i}function ta(n){return n!==void 0&&n.enterprise!==void 0}var bn=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jh(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function va(n,e){return $(n,"GET","/v2/recaptchaConfig",x(n,e))}async function zh(n,e){return $(n,"POST","/v1/accounts:delete",e)}async function An(n,e){return $(n,"POST","/v1/accounts:lookup",e)}function Rt(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ba(n,e=!1){let t=F(n),r=await t.getIdToken(e),i=Fi(r);I(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Rt(fi(i.auth_time)),issuedAtTime:Rt(fi(i.iat)),expirationTime:Rt(fi(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function fi(n){return Number(n)*1e3}function Fi(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _n("JWT malformed, contained fewer than 3 sections"),null;try{let i=un(t);return i?JSON.parse(i):(_n("Failed to decode base64 JWT payload"),null)}catch(i){return _n("Caught error parsing JWT payload as JSON",i?.toString()),null}}function na(n){let e=Fi(n);return I(e,"internal-error"),I(typeof e.exp<"u","internal-error"),I(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Nt(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof X&&Wh(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Wh({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ii=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Ot=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rt(this.lastLoginAt),this.creationTime=Rt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Sn(n){let e=n.auth,t=await n.getIdToken(),r=await Nt(n,An(e,{idToken:t}));I(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?Sa(i.providerUserInfo):[],o=Gh(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ot(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,g)}async function Aa(n){let e=F(n);await Sn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gh(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Sa(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Kh(n,e){let t=await Ea(n,{},async()=>{let r=nt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await Ta(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&ve(n.emulatorConfig.host)&&(c.credentials="include"),vn.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Jh(n,e){return $(n,"POST","/v2/accounts:revokeToken",x(n,e))}var Pt=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I(typeof e.idToken<"u","internal-error"),I(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):na(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){I(e.length!==0,"internal-error");let t=na(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(I(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await Kh(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(I(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(I(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(I(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return le("not implemented")}};function Pe(n,e){I(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ce=class n{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Ii(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ot(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Nt(this,this.stsTokenManager.getToken(this.auth,e));return I(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ba(this,e)}reload(){return Aa(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sn(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Z(this.auth.app))return Promise.reject(qe(this.auth));let e=await this.getIdToken();return await Nt(this,zh(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:w,emailVerified:y,isAnonymous:b,providerData:v,stsTokenManager:C}=t;I(w&&C,e,"internal-error");let O=Pt.fromJSON(this.name,C);I(typeof w=="string",e,"internal-error"),Pe(r,e.name),Pe(i,e.name),I(typeof y=="boolean",e,"internal-error"),I(typeof b=="boolean",e,"internal-error"),Pe(s,e.name),Pe(o,e.name),Pe(a,e.name),Pe(c,e.name),Pe(d,e.name),Pe(g,e.name);let j=new n({uid:w,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:O,createdAt:d,lastLoginAt:g});return v&&Array.isArray(v)&&(j.providerData=v.map(J=>({...J}))),c&&(j._redirectEventId=c),j}static async _fromIdTokenResponse(e,t,r=!1){let i=new Pt;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sn(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];I(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Sa(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Pt;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ot(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c}};var ra=new Map;function ye(n){we(n instanceof Function,"Expected a class definition");let e=ra.get(n);return e?(we(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ra.set(n,e),e)}var Rn=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Rn.type="NONE";var Ei=Rn;function yn(n,e,t){return`firebase:${n}:${e}:${t}`}var Pn=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=yn(this.userKey,i.apiKey,s),this.fullPersistenceKey=yn("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await An(this.auth,{idToken:e}).catch(()=>{});return t?Ce._fromGetAccountInfoResponse(this.auth,t,e):null}return Ce._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ye(Ei),e,r);let i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d),s=i[0]||ye(Ei),o=yn(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let g=await d._get(o);if(g){let w;if(typeof g=="string"){let y=await An(e,{idToken:g}).catch(()=>{});if(!y)break;w=await Ce._fromGetAccountInfoResponse(e,y,g)}else w=Ce._fromJSON(e,g);d!==s&&(a=w),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new n(s,e,r))}};function ia(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ka(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ra(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Oa(e))return"Blackberry";if(Da(e))return"Webos";if(Pa(e))return"Safari";if((e.includes("chrome/")||Ca(e))&&!e.includes("edge/"))return"Chrome";if(Na(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ra(n=q()){return/firefox\//i.test(n)}function Pa(n=q()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ca(n=q()){return/crios\//i.test(n)}function ka(n=q()){return/iemobile/i.test(n)}function Na(n=q()){return/android/i.test(n)}function Oa(n=q()){return/blackberry/i.test(n)}function Da(n=q()){return/webos/i.test(n)}function Bi(n=q()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Yh(n=q()){return Bi(n)&&!!window.navigator?.standalone}function Qh(){return Vo()&&document.documentMode===10}function La(n=q()){return Bi(n)||Na(n)||Da(n)||Oa(n)||/windows phone/i.test(n)||ka(n)}function Va(n,e=[]){let t;switch(n){case"Browser":t=ia(q());break;case"Worker":t=`${ia(q())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Re}/${r}`}var Ti=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Xh(n,e={}){return $(n,"GET","/v2/passwordPolicy",x(n,e))}var Zh=6,vi=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Zh,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var bi=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cn(this),this.idTokenSubscription=new Cn(this),this.beforeStateQueue=new Ti(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ia,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ye(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Pn.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await An(this,{idToken:e}),r=await Ce._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Z(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return I(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sn(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Bh()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Z(this.app))return Promise.reject(qe(this));let t=e?F(e):null;return t&&I(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&I(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Z(this.app)?Promise.reject(qe(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Z(this.app)?Promise.reject(qe(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ye(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Xh(this),t=new vi(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ge("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jh(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ye(e)||this._popupRedirectResolver;I(t,this,"argument-error"),this.redirectPersistenceManager=await Pn.create(this,[ye(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(I(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Va(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Z(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Mh(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Je(n){return F(n)}var Cn=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fo(t=>this.observer=t)}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Gn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ed(n){Gn=n}function Ma(n){return Gn.loadJS(n)}function td(){return Gn.recaptchaEnterpriseScript}function nd(){return Gn.gapiScript}function xa(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Ai=class{constructor(){this.enterprise=new Si}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Si=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var rd="recaptcha-enterprise",Ct="NO_RECAPTCHA",kn=class{constructor(e){this.type=rd,this.auth=Je(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{va(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let d=new bn(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){let c=window.grecaptcha;ta(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(Ct)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ai().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&ta(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=td();c.length!==0&&(c+=a),Ma(c).then(()=>{i(a,s,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}};async function At(n,e,t,r=!1,i=!1){let s=new kn(n),o;if(i)o=Ct;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}let a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function kt(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=await At(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=await At(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let s=await At(n,e,t);return r(n,s).catch(async o=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=await At(n,e,t,!1,!0);return r(n,a)}return Promise.reject(o)})}else{let s=await At(n,e,t,!1,!0);return r(n,s)}else return Promise.reject(i+" provider is not supported.")}async function id(n){let e=Je(n),t=await va(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new bn(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new kn(e).verify()}function Ua(n,e){let t=bt(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ce(s,e??{}))return i;ne(i,"already-initialized")}return t.initialize({options:e})}function sd(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ye);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Fa(n,e,t){let r=Je(n);I(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Ba(e),{host:o,port:a}=od(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},g=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){I(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),I(ce(d,r.config.emulator)&&ce(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,ve(o)?(ln(`${s}//${o}${c}`),hn("Auth",!0)):i||ad()}function Ba(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function od(n){let e=Ba(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:sa(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:sa(o)}}}function sa(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ad(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var He=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return le("not implemented")}_getIdTokenResponse(e){return le("not implemented")}_linkToIdToken(e,t){return le("not implemented")}_getReauthenticationResolver(e){return le("not implemented")}};async function cd(n,e){return $(n,"POST","/v1/accounts:signUp",e)}async function ud(n,e){return Ke(n,"POST","/v1/accounts:signInWithPassword",x(n,e))}async function ld(n,e){return Ke(n,"POST","/v1/accounts:signInWithEmailLink",x(n,e))}async function hd(n,e){return Ke(n,"POST","/v1/accounts:signInWithEmailLink",x(n,e))}var Dt=class n extends He{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kt(e,t,"signInWithPassword",ud,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ld(e,{email:this._email,oobCode:this._password});default:ne(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kt(e,r,"signUpPassword",cd,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hd(e,{idToken:t,email:this._email,oobCode:this._password});default:ne(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function st(n,e){return Ke(n,"POST","/v1/accounts:signInWithIdp",x(n,e))}var dd="http://localhost",je=class n extends He{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ne("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return st(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,st(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,st(e,t)}buildRequest(){let e={requestUri:dd,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nt(t)}return e}};async function oa(n,e){return $(n,"POST","/v1/accounts:sendVerificationCode",x(n,e))}async function fd(n,e){return Ke(n,"POST","/v1/accounts:signInWithPhoneNumber",x(n,e))}async function pd(n,e){let t=await Ke(n,"POST","/v1/accounts:signInWithPhoneNumber",x(n,e));if(t.temporaryProof)throw St(n,"account-exists-with-different-credential",t);return t}var md={USER_NOT_FOUND:"user-not-found"};async function gd(n,e){let t={...e,operation:"REAUTH"};return Ke(n,"POST","/v1/accounts:signInWithPhoneNumber",x(n,t),md)}var Lt=class n extends He{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return fd(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return pd(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return gd(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new n({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}};function _d(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yd(n){let e=rt(it(n)).link,t=e?rt(it(e)).deep_link_id:null,r=rt(it(n)).deep_link_id;return(r?rt(it(r)).link:null)||r||t||e||n}var Nn=class n{constructor(e){let t=rt(it(e)),r=t.apiKey??null,i=t.oobCode??null,s=_d(t.mode??null);I(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=yd(e);try{return new n(t)}catch{return null}}};var ot=class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,t){return Dt._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=Nn.parseLink(t);return I(r,"argument-error"),Dt._fromEmailAndCode(e,r.code,r.tenantId)}};ot.PROVIDER_ID="password";ot.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ot.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Vt=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ze=class extends Vt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Mt=class n extends ze{constructor(){super("facebook.com")}static credential(e){return je._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch{return null}}};Mt.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mt.PROVIDER_ID="facebook.com";var We=class n extends ze{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return je._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return n.credential(t,r)}catch{return null}}};We.GOOGLE_SIGN_IN_METHOD="google.com";We.PROVIDER_ID="google.com";var xt=class n extends ze{constructor(){super("github.com")}static credential(e){return je._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch{return null}}};xt.GITHUB_SIGN_IN_METHOD="github.com";xt.PROVIDER_ID="github.com";var Ut=class n extends ze{constructor(){super("twitter.com")}static credential(e,t){return je._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return n.credential(t,r)}catch{return null}}};Ut.TWITTER_SIGN_IN_METHOD="twitter.com";Ut.PROVIDER_ID="twitter.com";var Ft=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await Ce._fromIdTokenResponse(e,r,i),o=aa(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=aa(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function aa(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ri=class n extends X{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function qa(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ri._fromErrorAndOperation(n,s,e,r):s})}async function wd(n,e,t=!1){let r=await Nt(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ft._forOperation(n,"link",r)}async function Id(n,e,t=!1){let{auth:r}=n;if(Z(r.app))return Promise.reject(qe(r));let i="reauthenticate";try{let s=await Nt(n,qa(r,i,e,n),t);I(s.idToken,r,"internal-error");let o=Fi(s.idToken);I(o,r,"internal-error");let{sub:a}=o;return I(n.uid===a,r,"user-mismatch"),Ft._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ne(r,"user-mismatch"),s}}async function Ed(n,e,t=!1){if(Z(n.app))return Promise.reject(qe(n));let r="signIn",i=await qa(n,r,e),s=await Ft._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function $a(n,e,t,r){return F(n).onIdTokenChanged(e,t,r)}function Ha(n,e,t){return F(n).beforeAuthStateChanged(e,t)}function qi(n,e,t,r){return F(n).onAuthStateChanged(e,t,r)}function $i(n){return F(n).signOut()}function ca(n,e){return $(n,"POST","/v2/accounts/mfaEnrollment:start",x(n,e))}function Td(n,e){return $(n,"POST","/v2/accounts/mfaEnrollment:finalize",x(n,e))}function vd(n,e){return $(n,"POST","/v2/accounts/mfaEnrollment:start",x(n,e))}function bd(n,e){return $(n,"POST","/v2/accounts/mfaEnrollment:finalize",x(n,e))}var On="__sak";var Dn=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(On,"1"),this.storage.removeItem(On),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Ad=1e3,Sd=10,Ln=class extends Dn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=La(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}let r=e.key;t?this.detachListener():this.stopPolling();let i=()=>{let o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Qh()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Sd):i()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Ad)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Ln.type="LOCAL";var ja=Ln;var Rd=1e3;function pi(n){let e=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),t=RegExp(`${e}=([^;]+)`);return document.cookie.match(t)?.[1]??null}function mi(n){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${n.split(":")[3]}`}var Pi=class{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=mi(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:pi(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let r=mi(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;let r=mi(e);if(window.cookieStore){let a=(d=>{let g=d.changed.find(y=>y.name===r);g&&t(g.value),d.deleted.find(y=>y.name===r)&&t(null)}),c=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(t,c),window.cookieStore.addEventListener("change",a)}let i=pi(r),s=setInterval(()=>{let a=pi(r);a!==i&&(t(a),i=a)},Rd),o=()=>clearInterval(s);this.listenerUnsubscribes.set(t,o)}_removeListener(e,t){let r=this.listenerUnsubscribes.get(t);r&&(r(),this.listenerUnsubscribes.delete(t))}};Pi.type="COOKIE";var Vn=class extends Dn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};Vn.type="SESSION";var Hi=Vn;function Pd(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Mn=class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let a=Array.from(o).map(async d=>d(t.origin,s)),c=await Pd(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Mn.receivers=[];function ji(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Ci=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=ji("",20);i.port1.start();let g=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(w){let y=w;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(g),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function he(){return window}function Cd(n){he().location.href=n}function za(){return typeof he().WorkerGlobalScope<"u"&&typeof he().importScripts=="function"}async function kd(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nd(){return navigator?.serviceWorker?.controller||null}function Od(){return za()?self:null}var Wa="firebaseLocalStorageDb",Dd=1,xn="firebaseLocalStorage",Ga="fbase_key",Ge=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Kn(n,e){return n.transaction([xn],e?"readwrite":"readonly").objectStore(xn)}function Ld(){let n=indexedDB.deleteDatabase(Wa);return new Ge(n).toPromise()}function ki(){let n=indexedDB.open(Wa,Dd);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(xn,{keyPath:Ga})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(xn)?e(r):(r.close(),await Ld(),e(await ki()))})})}async function ua(n,e,t){let r=Kn(n,!0).put({[Ga]:e,value:t});return new Ge(r).toPromise()}async function Vd(n,e){let t=Kn(n,!1).get(e),r=await new Ge(t).toPromise();return r===void 0?null:r.value}function la(n,e){let t=Kn(n,!0).delete(e);return new Ge(t).toPromise()}var Md=800,xd=3,Un=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ki(),this.db)}async _withRetries(e){let t=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(t++>xd)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return za()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mn._getInstance(Od()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await kd(),!this.activeServiceWorker)return;this.sender=new Ci(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nd()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await ki();return await ua(e,On,"1"),await la(e,On),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ua(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(r=>Vd(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>la(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let s=Kn(i,!1).getAll();return new Ge(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let t=[],r=new Set;if(e.length!==0)for(let{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Md)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Un.type="LOCAL";var Ka=Un;function ha(n,e){return $(n,"POST","/v2/accounts/mfaSignIn:start",x(n,e))}function Ud(n,e){return $(n,"POST","/v2/accounts/mfaSignIn:finalize",x(n,e))}function Fd(n,e){return $(n,"POST","/v2/accounts/mfaSignIn:finalize",x(n,e))}var dg=xa("rcb"),fg=new $e(3e4,6e4);var wn="recaptcha";async function Bd(n,e,t){if(!n._getRecaptchaConfig())try{await id(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){let i=r.session;if("phoneNumber"in r){I(i.type==="enroll",n,"internal-error");let s={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await kt(n,s,"mfaSmsEnrollment",async(d,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===Ct){I(t?.type===wn,d,"argument-error");let w=await gi(d,g,t);return ca(d,w)}return ca(d,g)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{I(i.type==="signin",n,"internal-error");let s=r.multiFactorHint?.uid||r.multiFactorUid;I(s,n,"missing-multi-factor-info");let o={mfaPendingCredential:i.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await kt(n,o,"mfaSmsSignIn",async(g,w)=>{if(w.phoneSignInInfo.captchaResponse===Ct){I(t?.type===wn,g,"argument-error");let y=await gi(g,w,t);return ha(g,y)}return ha(g,w)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{let i={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await kt(n,i,"sendVerificationCode",async(c,d)=>{if(d.captchaResponse===Ct){I(t?.type===wn,c,"argument-error");let g=await gi(c,d,t);return oa(c,g)}return oa(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{t?._reset()}}async function gi(n,e,t){I(t.type===wn,n,"argument-error");let r=await t.verify();I(typeof r=="string",n,"argument-error");let i={...e};if("phoneEnrollmentInfo"in i){let s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){let s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var Bt=class n{constructor(e){this.providerId=n.PROVIDER_ID,this.auth=Je(e)}verifyPhoneNumber(e,t){return Bd(this.auth,e,F(t))}static credential(e,t){return Lt._fromVerification(e,t)}static credentialFromResult(e){let t=e;return n.credentialFromTaggedObject(t)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?Lt._fromTokenResponse(t,r):null}};Bt.PROVIDER_ID="phone";Bt.PHONE_SIGN_IN_METHOD="phone";function Ja(n,e){return e?ye(e):(I(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var qt=class extends He{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return st(e,this._buildIdpRequest())}_linkToIdToken(e,t){return st(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return st(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function qd(n){return Ed(n.auth,new qt(n),n.bypassAuthState)}function $d(n){let{auth:e,user:t}=n;return I(t,e,"internal-error"),Id(t,new qt(n),n.bypassAuthState)}async function Hd(n){let{auth:e,user:t}=n;return I(t,e,"internal-error"),wd(t,new qt(n),n.bypassAuthState)}var Fn=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qd;case"linkViaPopup":case"linkViaRedirect":return Hd;case"reauthViaPopup":case"reauthViaRedirect":return $d;default:ne(this.auth,"internal-error")}}resolve(e){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var jd=new $e(2e3,1e4);async function zi(n,e,t){if(Z(n.app))return Promise.reject(oe(n,"operation-not-supported-in-this-environment"));let r=Je(n);xh(n,e,Vt);let i=Ja(r,t);return new Bn(r,"signInViaPopup",e,i).executeNotNull()}var Bn=class n extends Fn{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return I(e,this.auth,"internal-error"),e}async onExecution(){we(this.filter.length===1,"Popup operations only handle one event");let e=ji();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(oe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jd.get())};e()}};Bn.currentPopupAction=null;var zd="pendingRedirect",In=new Map,Ni=class extends Fn{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=In.get(this.auth._key());if(!e){try{let r=await Wd(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}In.set(this.auth._key(),e)}return this.bypassAuthState||In.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Wd(n,e){let t=Jd(e),r=Kd(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function Gd(n,e){In.set(n._key(),e)}function Kd(n){return ye(n._redirectPersistence)}function Jd(n){return yn(zd,n.config.apiKey,n.name)}async function Yd(n,e,t=!1){if(Z(n.app))return Promise.reject(qe(n));let r=Je(n),i=Ja(r,e),o=await new Ni(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var Qd=600*1e3,Oi=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xd(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ya(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(oe(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qd&&this.cachedEventUids.clear(),this.cachedEventUids.has(da(e))}saveEventToCache(e){this.cachedEventUids.add(da(e)),this.lastProcessedEventTime=Date.now()}};function da(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ya({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Xd(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ya(n);default:return!1}}async function Zd(n,e={}){return $(n,"GET","/v1/projects",e)}var ef=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tf=/^https?/;async function nf(n){if(n.config.emulator)return;let{authorizedDomains:e}=await Zd(n);for(let t of e)try{if(rf(t))return}catch{}ne(n,"unauthorized-domain")}function rf(n){let e=yi(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!tf.test(t))return!1;if(ef.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var sf=new $e(3e4,6e4);function fa(){let n=he().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function of(n){return new Promise((e,t)=>{function r(){fa(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fa(),t(oe(n,"network-request-failed"))},timeout:sf.get()})}if(he().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(he().gapi?.load)r();else{let i=xa("iframefcb");return he()[i]=()=>{gapi.load?r():t(oe(n,"network-request-failed"))},Ma(`${nd()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw En=null,e})}var En=null;function af(n){return En=En||of(n),En}var cf=new $e(5e3,15e3),uf="__/auth/iframe",lf="emulator/auth/iframe",hf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},df=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ff(n){let e=n.config;I(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Ui(e,lf):`https://${n.config.authDomain}/${uf}`,r={apiKey:e.apiKey,appName:n.name,v:Re},i=df.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${nt(r).slice(1)}`}async function pf(n){let e=await af(n),t=he().gapi;return I(t,n,"internal-error"),e.open({where:document.body,url:ff(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hf,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=oe(n,"network-request-failed"),a=he().setTimeout(()=>{s(o)},cf.get());function c(){he().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}var mf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gf=500,_f=600,yf="_blank",wf="http://localhost",qn=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function If(n,e,t,r=gf,i=_f){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c={...mf,width:r.toString(),height:i.toString(),top:s,left:o},d=q().toLowerCase();t&&(a=Ca(d)?yf:t),Ra(d)&&(e=e||wf,c.scrollbars="yes");let g=Object.entries(c).reduce((y,[b,v])=>`${y}${b}=${v},`,"");if(Yh(d)&&a!=="_self")return Ef(e||"",a),new qn(null);let w=window.open(e||"",a,g);I(w,n,"popup-blocked");try{w.focus()}catch{}return new qn(w)}function Ef(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Tf="__/auth/handler",vf="emulator/auth/handler",bf=encodeURIComponent("fac");async function pa(n,e,t,r,i,s){I(n.config.authDomain,n,"auth-domain-config-required"),I(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Re,eventId:i};if(e instanceof Vt){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Uo(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,w]of Object.entries(s||{}))o[g]=w}if(e instanceof ze){let g=e.getScopes().filter(w=>w!=="");g.length>0&&(o.scopes=g.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let g of Object.keys(a))a[g]===void 0&&delete a[g];let c=await n._getAppCheckToken(),d=c?`#${bf}=${encodeURIComponent(c)}`:"";return`${Af(n)}?${nt(a).slice(1)}${d}`}function Af({config:n}){return n.emulator?Ui(n,vf):`https://${n.authDomain}/${Tf}`}var _i="webStorageSupport",Di=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hi,this._completeRedirectFn=Yd,this._overrideRedirectResult=Gd}async _openPopup(e,t,r,i){we(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=await pa(e,t,r,yi(),i);return If(e,s,ji())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await pa(e,t,r,yi(),i);return Cd(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(we(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await pf(e),r=new Oi(e);return t.register("authEvent",i=>(I(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_i,{type:_i},i=>{let s=i?.[0]?.[_i];s!==void 0&&t(!!s),ne(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nf(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return La()||Pa()||Bi()}},Qa=Di,$n=class{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return le("unexpected MultiFactorSessionType")}}},Li=class n extends $n{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n(e)}_finalizeEnroll(e,t,r){return Td(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Ud(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Hn=class{constructor(){}static assertion(e){return Li._fromCredential(e)}};Hn.FACTOR_ID="phone";var jn=class{static assertionForEnrollment(e,t){return zn._fromSecret(e,t)}static assertionForSignIn(e,t){return zn._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;I(typeof t.user?.auth<"u","internal-error");let r=await vd(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Wn._fromStartTotpMfaEnrollmentResponse(r,t.user.auth)}};jn.FACTOR_ID="totp";var zn=class n extends $n{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new n(t,void 0,e)}static _fromEnrollmentId(e,t){return new n(t,e)}async _finalizeEnroll(e,t,r){return I(typeof this.secret<"u",e,"argument-error"),bd(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){I(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let r={verificationCode:this.otp};return Fd(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}},Wn=class n{constructor(e,t,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,t){return new n(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let r=!1;return(gn(e)||gn(t))&&(r=!0),r&&(gn(e)&&(e=this.auth.currentUser?.email||"unknownuser"),gn(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function gn(n){return typeof n>"u"||n?.length===0}var ma="@firebase/auth",ga="1.11.1";var Vi=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Sf(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rf(n){Se(new te("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;I(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Va(n)},d=new bi(r,i,s,c);return sd(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Se(new te("auth-internal",e=>{let t=Je(e.getProvider("auth").getImmediate());return(r=>new Vi(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),se(ma,ga,Sf(n)),se(ma,ga,"esm2020")}var Pf=300,Cf=Qr("authIdTokenMaxAge")||Pf,_a=null,kf=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Cf)return;let i=t?.token;_a!==i&&(_a=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Wi(n=mn()){let e=bt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ua(n,{popupRedirectResolver:Qa,persistence:[Ka,ja,Hi]}),r=Qr("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=kf(s.toString());Ha(t,o,()=>o(t.currentUser)),$a(t,a=>o(a))}}let i=Jr("auth");return i&&Fa(t,`http://${i}`),t}function Nf(){return document.getElementsByTagName("head")?.[0]??document}ed({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=oe("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Nf().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rf("Browser");var Xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Za={};var Gi,Of;(function(){var n;function e(f,u){function h(){}h.prototype=u.prototype,f.F=u.prototype,f.prototype=new h,f.prototype.constructor=f,f.D=function(m,p,_){for(var l=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)l[Fe-2]=arguments[Fe];return u.prototype[p].apply(m,l)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(f,u,h){h||(h=0);let m=Array(16);if(typeof u=="string")for(var p=0;p<16;++p)m[p]=u.charCodeAt(h++)|u.charCodeAt(h++)<<8|u.charCodeAt(h++)<<16|u.charCodeAt(h++)<<24;else for(p=0;p<16;++p)m[p]=u[h++]|u[h++]<<8|u[h++]<<16|u[h++]<<24;u=f.g[0],h=f.g[1],p=f.g[2];let _=f.g[3],l;l=u+(_^h&(p^_))+m[0]+3614090360&4294967295,u=h+(l<<7&4294967295|l>>>25),l=_+(p^u&(h^p))+m[1]+3905402710&4294967295,_=u+(l<<12&4294967295|l>>>20),l=p+(h^_&(u^h))+m[2]+606105819&4294967295,p=_+(l<<17&4294967295|l>>>15),l=h+(u^p&(_^u))+m[3]+3250441966&4294967295,h=p+(l<<22&4294967295|l>>>10),l=u+(_^h&(p^_))+m[4]+4118548399&4294967295,u=h+(l<<7&4294967295|l>>>25),l=_+(p^u&(h^p))+m[5]+1200080426&4294967295,_=u+(l<<12&4294967295|l>>>20),l=p+(h^_&(u^h))+m[6]+2821735955&4294967295,p=_+(l<<17&4294967295|l>>>15),l=h+(u^p&(_^u))+m[7]+4249261313&4294967295,h=p+(l<<22&4294967295|l>>>10),l=u+(_^h&(p^_))+m[8]+1770035416&4294967295,u=h+(l<<7&4294967295|l>>>25),l=_+(p^u&(h^p))+m[9]+2336552879&4294967295,_=u+(l<<12&4294967295|l>>>20),l=p+(h^_&(u^h))+m[10]+4294925233&4294967295,p=_+(l<<17&4294967295|l>>>15),l=h+(u^p&(_^u))+m[11]+2304563134&4294967295,h=p+(l<<22&4294967295|l>>>10),l=u+(_^h&(p^_))+m[12]+1804603682&4294967295,u=h+(l<<7&4294967295|l>>>25),l=_+(p^u&(h^p))+m[13]+4254626195&4294967295,_=u+(l<<12&4294967295|l>>>20),l=p+(h^_&(u^h))+m[14]+2792965006&4294967295,p=_+(l<<17&4294967295|l>>>15),l=h+(u^p&(_^u))+m[15]+1236535329&4294967295,h=p+(l<<22&4294967295|l>>>10),l=u+(p^_&(h^p))+m[1]+4129170786&4294967295,u=h+(l<<5&4294967295|l>>>27),l=_+(h^p&(u^h))+m[6]+3225465664&4294967295,_=u+(l<<9&4294967295|l>>>23),l=p+(u^h&(_^u))+m[11]+643717713&4294967295,p=_+(l<<14&4294967295|l>>>18),l=h+(_^u&(p^_))+m[0]+3921069994&4294967295,h=p+(l<<20&4294967295|l>>>12),l=u+(p^_&(h^p))+m[5]+3593408605&4294967295,u=h+(l<<5&4294967295|l>>>27),l=_+(h^p&(u^h))+m[10]+38016083&4294967295,_=u+(l<<9&4294967295|l>>>23),l=p+(u^h&(_^u))+m[15]+3634488961&4294967295,p=_+(l<<14&4294967295|l>>>18),l=h+(_^u&(p^_))+m[4]+3889429448&4294967295,h=p+(l<<20&4294967295|l>>>12),l=u+(p^_&(h^p))+m[9]+568446438&4294967295,u=h+(l<<5&4294967295|l>>>27),l=_+(h^p&(u^h))+m[14]+3275163606&4294967295,_=u+(l<<9&4294967295|l>>>23),l=p+(u^h&(_^u))+m[3]+4107603335&4294967295,p=_+(l<<14&4294967295|l>>>18),l=h+(_^u&(p^_))+m[8]+1163531501&4294967295,h=p+(l<<20&4294967295|l>>>12),l=u+(p^_&(h^p))+m[13]+2850285829&4294967295,u=h+(l<<5&4294967295|l>>>27),l=_+(h^p&(u^h))+m[2]+4243563512&4294967295,_=u+(l<<9&4294967295|l>>>23),l=p+(u^h&(_^u))+m[7]+1735328473&4294967295,p=_+(l<<14&4294967295|l>>>18),l=h+(_^u&(p^_))+m[12]+2368359562&4294967295,h=p+(l<<20&4294967295|l>>>12),l=u+(h^p^_)+m[5]+4294588738&4294967295,u=h+(l<<4&4294967295|l>>>28),l=_+(u^h^p)+m[8]+2272392833&4294967295,_=u+(l<<11&4294967295|l>>>21),l=p+(_^u^h)+m[11]+1839030562&4294967295,p=_+(l<<16&4294967295|l>>>16),l=h+(p^_^u)+m[14]+4259657740&4294967295,h=p+(l<<23&4294967295|l>>>9),l=u+(h^p^_)+m[1]+2763975236&4294967295,u=h+(l<<4&4294967295|l>>>28),l=_+(u^h^p)+m[4]+1272893353&4294967295,_=u+(l<<11&4294967295|l>>>21),l=p+(_^u^h)+m[7]+4139469664&4294967295,p=_+(l<<16&4294967295|l>>>16),l=h+(p^_^u)+m[10]+3200236656&4294967295,h=p+(l<<23&4294967295|l>>>9),l=u+(h^p^_)+m[13]+681279174&4294967295,u=h+(l<<4&4294967295|l>>>28),l=_+(u^h^p)+m[0]+3936430074&4294967295,_=u+(l<<11&4294967295|l>>>21),l=p+(_^u^h)+m[3]+3572445317&4294967295,p=_+(l<<16&4294967295|l>>>16),l=h+(p^_^u)+m[6]+76029189&4294967295,h=p+(l<<23&4294967295|l>>>9),l=u+(h^p^_)+m[9]+3654602809&4294967295,u=h+(l<<4&4294967295|l>>>28),l=_+(u^h^p)+m[12]+3873151461&4294967295,_=u+(l<<11&4294967295|l>>>21),l=p+(_^u^h)+m[15]+530742520&4294967295,p=_+(l<<16&4294967295|l>>>16),l=h+(p^_^u)+m[2]+3299628645&4294967295,h=p+(l<<23&4294967295|l>>>9),l=u+(p^(h|~_))+m[0]+4096336452&4294967295,u=h+(l<<6&4294967295|l>>>26),l=_+(h^(u|~p))+m[7]+1126891415&4294967295,_=u+(l<<10&4294967295|l>>>22),l=p+(u^(_|~h))+m[14]+2878612391&4294967295,p=_+(l<<15&4294967295|l>>>17),l=h+(_^(p|~u))+m[5]+4237533241&4294967295,h=p+(l<<21&4294967295|l>>>11),l=u+(p^(h|~_))+m[12]+1700485571&4294967295,u=h+(l<<6&4294967295|l>>>26),l=_+(h^(u|~p))+m[3]+2399980690&4294967295,_=u+(l<<10&4294967295|l>>>22),l=p+(u^(_|~h))+m[10]+4293915773&4294967295,p=_+(l<<15&4294967295|l>>>17),l=h+(_^(p|~u))+m[1]+2240044497&4294967295,h=p+(l<<21&4294967295|l>>>11),l=u+(p^(h|~_))+m[8]+1873313359&4294967295,u=h+(l<<6&4294967295|l>>>26),l=_+(h^(u|~p))+m[15]+4264355552&4294967295,_=u+(l<<10&4294967295|l>>>22),l=p+(u^(_|~h))+m[6]+2734768916&4294967295,p=_+(l<<15&4294967295|l>>>17),l=h+(_^(p|~u))+m[13]+1309151649&4294967295,h=p+(l<<21&4294967295|l>>>11),l=u+(p^(h|~_))+m[4]+4149444226&4294967295,u=h+(l<<6&4294967295|l>>>26),l=_+(h^(u|~p))+m[11]+3174756917&4294967295,_=u+(l<<10&4294967295|l>>>22),l=p+(u^(_|~h))+m[2]+718787259&4294967295,p=_+(l<<15&4294967295|l>>>17),l=h+(_^(p|~u))+m[9]+3951481745&4294967295,f.g[0]=f.g[0]+u&4294967295,f.g[1]=f.g[1]+(p+(l<<21&4294967295|l>>>11))&4294967295,f.g[2]=f.g[2]+p&4294967295,f.g[3]=f.g[3]+_&4294967295}r.prototype.v=function(f,u){u===void 0&&(u=f.length);let h=u-this.blockSize,m=this.C,p=this.h,_=0;for(;_<u;){if(p==0)for(;_<=h;)i(this,f,_),_+=this.blockSize;if(typeof f=="string"){for(;_<u;)if(m[p++]=f.charCodeAt(_++),p==this.blockSize){i(this,m),p=0;break}}else for(;_<u;)if(m[p++]=f[_++],p==this.blockSize){i(this,m),p=0;break}}this.h=p,this.o+=u},r.prototype.A=function(){var f=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);f[0]=128;for(var u=1;u<f.length-8;++u)f[u]=0;u=this.o*8;for(var h=f.length-8;h<f.length;++h)f[h]=u&255,u/=256;for(this.v(f),f=Array(16),u=0,h=0;h<4;++h)for(let m=0;m<32;m+=8)f[u++]=this.g[h]>>>m&255;return f};function s(f,u){var h=a;return Object.prototype.hasOwnProperty.call(h,f)?h[f]:h[f]=u(f)}function o(f,u){this.h=u;let h=[],m=!0;for(let p=f.length-1;p>=0;p--){let _=f[p]|0;m&&_==u||(h[p]=_,m=!1)}this.g=h}var a={};function c(f){return-128<=f&&f<128?s(f,function(u){return new o([u|0],u<0?-1:0)}):new o([f|0],f<0?-1:0)}function d(f){if(isNaN(f)||!isFinite(f))return w;if(f<0)return O(d(-f));let u=[],h=1;for(let m=0;f>=h;m++)u[m]=f/h|0,h*=4294967296;return new o(u,0)}function g(f,u){if(f.length==0)throw Error("number format error: empty string");if(u=u||10,u<2||36<u)throw Error("radix out of range: "+u);if(f.charAt(0)=="-")return O(g(f.substring(1),u));if(f.indexOf("-")>=0)throw Error('number format error: interior "-" character');let h=d(Math.pow(u,8)),m=w;for(let _=0;_<f.length;_+=8){var p=Math.min(8,f.length-_);let l=parseInt(f.substring(_,_+p),u);p<8?(p=d(Math.pow(u,p)),m=m.j(p).add(d(l))):(m=m.j(h),m=m.add(d(l)))}return m}var w=c(0),y=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(C(this))return-O(this).m();let f=0,u=1;for(let h=0;h<this.g.length;h++){let m=this.i(h);f+=(m>=0?m:4294967296+m)*u,u*=4294967296}return f},n.toString=function(f){if(f=f||10,f<2||36<f)throw Error("radix out of range: "+f);if(v(this))return"0";if(C(this))return"-"+O(this).toString(f);let u=d(Math.pow(f,6));var h=this;let m="";for(;;){let p=me(h,u).g;h=j(h,p.j(u));let _=((h.g.length>0?h.g[0]:h.h)>>>0).toString(f);if(h=p,v(h))return _+m;for(;_.length<6;)_="0"+_;m=_+m}},n.i=function(f){return f<0?0:f<this.g.length?this.g[f]:this.h};function v(f){if(f.h!=0)return!1;for(let u=0;u<f.g.length;u++)if(f.g[u]!=0)return!1;return!0}function C(f){return f.h==-1}n.l=function(f){return f=j(this,f),C(f)?-1:v(f)?0:1};function O(f){let u=f.g.length,h=[];for(let m=0;m<u;m++)h[m]=~f.g[m];return new o(h,~f.h).add(y)}n.abs=function(){return C(this)?O(this):this},n.add=function(f){let u=Math.max(this.g.length,f.g.length),h=[],m=0;for(let p=0;p<=u;p++){let _=m+(this.i(p)&65535)+(f.i(p)&65535),l=(_>>>16)+(this.i(p)>>>16)+(f.i(p)>>>16);m=l>>>16,_&=65535,l&=65535,h[p]=l<<16|_}return new o(h,h[h.length-1]&-2147483648?-1:0)};function j(f,u){return f.add(O(u))}n.j=function(f){if(v(this)||v(f))return w;if(C(this))return C(f)?O(this).j(O(f)):O(O(this).j(f));if(C(f))return O(this.j(O(f)));if(this.l(b)<0&&f.l(b)<0)return d(this.m()*f.m());let u=this.g.length+f.g.length,h=[];for(var m=0;m<2*u;m++)h[m]=0;for(m=0;m<this.g.length;m++)for(let p=0;p<f.g.length;p++){let _=this.i(m)>>>16,l=this.i(m)&65535,Fe=f.i(p)>>>16,Eo=f.i(p)&65535;h[2*m+2*p]+=l*Eo,J(h,2*m+2*p),h[2*m+2*p+1]+=_*Eo,J(h,2*m+2*p+1),h[2*m+2*p+1]+=l*Fe,J(h,2*m+2*p+1),h[2*m+2*p+2]+=_*Fe,J(h,2*m+2*p+2)}for(f=0;f<u;f++)h[f]=h[2*f+1]<<16|h[2*f];for(f=u;f<2*u;f++)h[f]=0;return new o(h,0)};function J(f,u){for(;(f[u]&65535)!=f[u];)f[u+1]+=f[u]>>>16,f[u]&=65535,u++}function Y(f,u){this.g=f,this.h=u}function me(f,u){if(v(u))throw Error("division by zero");if(v(f))return new Y(w,w);if(C(f))return u=me(O(f),u),new Y(O(u.g),O(u.h));if(C(u))return u=me(f,O(u)),new Y(O(u.g),u.h);if(f.g.length>30){if(C(f)||C(u))throw Error("slowDivide_ only works with positive integers.");for(var h=y,m=u;m.l(f)<=0;)h=ee(h),m=ee(m);var p=B(h,1),_=B(m,1);for(m=B(m,2),h=B(h,2);!v(m);){var l=_.add(m);l.l(f)<=0&&(p=p.add(h),_=l),m=B(m,1),h=B(h,1)}return u=j(f,p.j(u)),new Y(p,u)}for(p=w;f.l(u)>=0;){for(h=Math.max(1,Math.floor(f.m()/u.m())),m=Math.ceil(Math.log(h)/Math.LN2),m=m<=48?1:Math.pow(2,m-48),_=d(h),l=_.j(u);C(l)||l.l(f)>0;)h-=m,_=d(h),l=_.j(u);v(_)&&(_=y),p=p.add(_),f=j(f,l)}return new Y(p,f)}n.B=function(f){return me(this,f).h},n.and=function(f){let u=Math.max(this.g.length,f.g.length),h=[];for(let m=0;m<u;m++)h[m]=this.i(m)&f.i(m);return new o(h,this.h&f.h)},n.or=function(f){let u=Math.max(this.g.length,f.g.length),h=[];for(let m=0;m<u;m++)h[m]=this.i(m)|f.i(m);return new o(h,this.h|f.h)},n.xor=function(f){let u=Math.max(this.g.length,f.g.length),h=[];for(let m=0;m<u;m++)h[m]=this.i(m)^f.i(m);return new o(h,this.h^f.h)};function ee(f){let u=f.g.length+1,h=[];for(let m=0;m<u;m++)h[m]=f.i(m)<<1|f.i(m-1)>>>31;return new o(h,f.h)}function B(f,u){let h=u>>5;u%=32;let m=f.g.length-h,p=[];for(let _=0;_<m;_++)p[_]=u>0?f.i(_+h)>>>u|f.i(_+h+1)<<32-u:f.i(_+h);return new o(p,f.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Of=Za.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=g,Gi=Za.Integer=o}).apply(typeof Xa<"u"?Xa:typeof self<"u"?self:typeof window<"u"?window:{});var ec="4.9.2";var H=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};H.UNAUTHENTICATED=new H(null),H.GOOGLE_CREDENTIALS=new H("google-credentials-uid"),H.FIRST_PARTY=new H("first-party-uid"),H.MOCK_USER=new H("mock-user");var mt="12.3.0";var ut=new be("@firebase/firestore");function Qn(n,...e){if(ut.logLevel<=R.DEBUG){let t=e.map(zs);ut.debug(`Firestore (${mt}): ${n}`,...t)}}function js(n,...e){if(ut.logLevel<=R.ERROR){let t=e.map(zs);ut.error(`Firestore (${mt}): ${n}`,...t)}}function Ec(n,...e){if(ut.logLevel<=R.WARN){let t=e.map(zs);ut.warn(`Firestore (${mt}): ${n}`,...t)}}function zs(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function D(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Tc(n,r,t)}function Tc(n,e,t){let r=`FIRESTORE (${mt}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw js(r),new Error(r)}function De(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Tc(e,i,r)}function wr(n,e){return n}var tc="ok",Df="cancelled",$t="unknown",T="invalid-argument",Lf="deadline-exceeded",Vf="not-found";var Mf="permission-denied",Qi="unauthenticated",xf="resource-exhausted",lt="failed-precondition",Uf="aborted",Ff="out-of-range",vc="unimplemented",Bf="internal",qf="unavailable";var E=class extends X{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xn=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Xi=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(H.UNAUTHENTICATED)))}shutdown(){}},Zi=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},es=class{constructor(e){this.auth=null,e.onInit((t=>{this.auth=t}))}getToken(){return this.auth?this.auth.getToken().then((e=>e?(De(typeof e.accessToken=="string",42297,{t:e}),new Xn(e.accessToken,new H(this.auth.getUid()))):null)):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}},ts=class{constructor(e,t,r){this.i=e,this.o=t,this.u=r,this.type="FirstParty",this.user=H.FIRST_PARTY,this.l=new Map}h(){return this.u?this.u():null}get headers(){this.l.set("X-Goog-AuthUser",this.i);let e=this.h();return e&&this.l.set("Authorization",e),this.o&&this.l.set("X-Goog-Iam-Authorization-Token",this.o),this.l}},ns=class{constructor(e,t,r){this.i=e,this.o=t,this.u=r}getToken(){return Promise.resolve(new ts(this.i,this.o,this.u))}start(e,t){e.enqueueRetryable((()=>t(H.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Zn=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},rs=class{constructor(e,t){this.m=t,this.appCheck=null,this.T=null,Z(e)&&e.settings.appCheckToken&&(this.T=e.settings.appCheckToken),t.onInit((r=>{this.appCheck=r}))}getToken(){return this.T?Promise.resolve(new Zn(this.T)):this.appCheck?this.appCheck.getToken().then((e=>e?(De(typeof e.token=="string",3470,{tokenResult:e}),new Zn(e.token)):null)):Promise.resolve(null)}invalidateToken(){}start(e,t){}shutdown(){}};var is=class{constructor(e,t,r,i,s,o,a,c,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=g}},ss="(default)",er=class n{constructor(e,t){this.projectId=e,this.database=t||ss}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ss}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function $f(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var os=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=$f(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function L(n,e){return n<e?-1:n>e?1:0}function as(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return Ki(i)===Ki(s)?L(i,s):Ki(i)?1:-1}return L(n.length,e.length)}var Hf=55296,jf=57343;function Ki(n){let e=n.charCodeAt(0);return e>=Hf&&e<=jf}function bc(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}var nc="__name__",tr=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&D(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&D(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return L(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):as(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gi.fromString(e.substring(4,e.length-2))}},U=class n extends tr{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new E(T,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new n(t)}static emptyPath(){return new n([])}},zf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,de=class n extends tr{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return zf.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nc}static keyField(){return new n([nc])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new E(T,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new E(T,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new E(T,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new E(T,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(U.fromString(e))}static fromName(e){return new n(U.fromString(e).popFirst(5))}static empty(){return new n(U.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&U.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return U.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new U(e.slice()))}};function Ac(n,e,t){if(!t)throw new E(T,`Function ${n}() cannot be called with an empty ${e}.`)}function rc(n){if(!W.isDocumentKey(n))throw new E(T,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ic(n){if(W.isDocumentKey(n))throw new E(T,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sc(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ir(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":D(12329,{type:typeof n})}function Ws(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new E(T,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ir(n);throw new E(T,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Rc(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Jn=null;function Wf(){return Jn===null?Jn=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jn++,"0x"+Jn.toString(16)}function Gf(n){return n==null}function nr(n){return n===0&&1/n==-1/0}var Ji="RestConnection",Kf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},cs=class{get P(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.A=t+"://"+e.host,this.R=`projects/${r}/databases/${i}`,this.V=this.databaseId.database===ss?`project_id=${r}`:`project_id=${r}&database_id=${i}`}I(e,t,r,i,s){let o=Wf(),a=this.p(e,t.toUriEncodedString());Qn(Ji,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.R,"x-goog-request-params":this.V};this.F(c,i,s);let{host:d}=new URL(a),g=ve(d);return this.v(e,a,c,r,g).then((w=>(Qn(Ji,`Received RPC '${e}' ${o}: `,w),w)),(w=>{throw Ec(Ji,`RPC '${e}' ${o} failed with error: `,w,"url: ",a,"request:",r),w}))}D(e,t,r,i,s,o){return this.I(e,t,r,i,s)}F(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+mt})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}p(e,t){let r=Kf[e];return`${this.A}/v1/${t}:${r}`}terminate(){}};var sc,A;function oc(n){if(n===void 0)return js("RPC_ERROR","HTTP error has no status"),$t;switch(n){case 200:return tc;case 400:return lt;case 401:return Qi;case 403:return Mf;case 404:return Vf;case 409:return Uf;case 416:return Ff;case 429:return xf;case 499:return Df;case 500:return $t;case 501:return vc;case 503:return qf;case 504:return Lf;default:return n>=200&&n<300?tc:n>=400&&n<500?lt:n>=500&&n<600?Bf:$t}}(A=sc||(sc={}))[A.OK=0]="OK",A[A.CANCELLED=1]="CANCELLED",A[A.UNKNOWN=2]="UNKNOWN",A[A.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",A[A.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",A[A.NOT_FOUND=5]="NOT_FOUND",A[A.ALREADY_EXISTS=6]="ALREADY_EXISTS",A[A.PERMISSION_DENIED=7]="PERMISSION_DENIED",A[A.UNAUTHENTICATED=16]="UNAUTHENTICATED",A[A.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",A[A.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",A[A.ABORTED=10]="ABORTED",A[A.OUT_OF_RANGE=11]="OUT_OF_RANGE",A[A.UNIMPLEMENTED=12]="UNIMPLEMENTED",A[A.INTERNAL=13]="INTERNAL",A[A.UNAVAILABLE=14]="UNAVAILABLE",A[A.DATA_LOSS=15]="DATA_LOSS";var us=class extends cs{S(e,t){throw new Error("Not supported by FetchConnection")}async v(e,t,r,i,s){let o=JSON.stringify(i),a;try{let c={method:"POST",headers:r,body:o};s&&(c.credentials="include"),a=await fetch(t,c)}catch(c){let d=c;throw new E(oc(d.status),"Request failed with error: "+d.statusText)}if(!a.ok){let c=await a.json();Array.isArray(c)&&(c=c[0]);let d=c?.error?.message;throw new E(oc(a.status),`Request failed with error: ${d??a.statusText}`)}return a.json()}};function ac(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Er(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}var ls=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Le=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ls("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return L(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Le.EMPTY_BYTE_STRING=new Le("");var Jf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ye(n){if(De(!!n,39018),typeof n=="string"){let e=0,t=Jf.exec(n);if(De(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:V(n.seconds),nanos:V(n.nanos)}}function V(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zt(n){return typeof n=="string"?Le.fromBase64String(n):Le.fromUint8Array(n)}function re(n,e){let t={typeString:n};return e&&(t.value=e),t}function Xt(n,e){if(!Sc(n))throw new E(T,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new E(T,t);return!0}var cc=-62135596800,uc=1e6,K=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uc);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new E(T,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new E(T,"Timestamp nanoseconds out of range: "+t);if(e<cc)throw new E(T,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new E(T,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uc}_compareTo(e){return this.seconds===e.seconds?L(this.nanoseconds,e.nanoseconds):L(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xt(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-cc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};K._jsonSchemaVersion="firestore/timestamp/1.0",K._jsonSchema={type:re("string",K._jsonSchemaVersion),seconds:re("number"),nanoseconds:re("number")};function Pc(n){return(n?.mapValue?.fields||{}).__type__?.stringValue==="server_timestamp"}function Cc(n){let e=n.mapValue.fields.__previous_value__;return Pc(e)?Cc(e):e}function Wt(n){let e=Ye(n.mapValue.fields.__local_write_time__.timestampValue);return new K(e.seconds,e.nanos)}var kc="__type__",Nc="__max__",Yn={fields:{__type__:{stringValue:Nc}}},Oc="__vector__",rr="value";function Qe(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pc(n)?4:(function(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Nc})(n)?9007199254740991:(function(t){return(t?.mapValue?.fields||{})[kc]?.stringValue===Oc})(n)?10:11:D(28295,{value:n})}function ir(n,e){if(n===e)return!0;let t=Qe(n);if(t!==Qe(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wt(n).isEqual(Wt(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ye(i.timestampValue),a=Ye(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return zt(i.bytesValue).isEqual(zt(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return V(i.geoPointValue.latitude)===V(s.geoPointValue.latitude)&&V(i.geoPointValue.longitude)===V(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return V(i.integerValue)===V(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=V(i.doubleValue),a=V(s.doubleValue);return o===a?nr(o)===nr(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return bc(n.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ac(o)!==ac(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ir(o[c],a[c])))return!1;return!0})(n,e);default:return D(52216,{left:n})}}function Gt(n,e){return(n.values||[]).find((t=>ir(t,e)))!==void 0}function sr(n,e){if(n===e)return 0;let t=Qe(n),r=Qe(e);if(t!==r)return L(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return L(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=V(s.integerValue||s.doubleValue),c=V(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return lc(n.timestampValue,e.timestampValue);case 4:return lc(Wt(n),Wt(e));case 5:return as(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=zt(s),c=zt(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let g=L(a[d],c[d]);if(g!==0)return g}return L(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=L(V(s.latitude),V(o.latitude));return a!==0?a:L(V(s.longitude),V(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hc(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[rr]?.arrayValue,g=c[rr]?.arrayValue,w=L(d?.values?.length||0,g?.values?.length||0);return w!==0?w:hc(d,g)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Yn&&o===Yn)return 0;if(s===Yn)return 1;if(o===Yn)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},g=Object.keys(d);c.sort(),g.sort();for(let w=0;w<c.length&&w<g.length;++w){let y=as(c[w],g[w]);if(y!==0)return y;let b=sr(a[c[w]],d[g[w]]);if(b!==0)return b}return L(c.length,g.length)})(n.mapValue,e.mapValue);default:throw D(23264,{C:t})}}function lc(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return L(n,e);let t=Ye(n),r=Ye(e),i=L(t.seconds,r.seconds);return i!==0?i:L(t.nanos,r.nanos)}function hc(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=sr(t[i],r[i]);if(s)return s}return L(t.length,r.length)}function dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dc(n){return!!n&&"arrayValue"in n}function fc(n){return!!n&&"nullValue"in n}function pc(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yi(n){return!!n&&"mapValue"in n}function Ht(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){let e={mapValue:{fields:{}}};return Er(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ht(r))),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ht(n.arrayValue.values[t]);return e}return{...n}}var or=class{constructor(e,t){this.position=e,this.inclusive=t}};var ar=class{},ae=class n extends ar{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hs(e,t,r):t==="array-contains"?new ps(e,r):t==="in"?new ms(e,r):t==="not-in"?new gs(e,r):t==="array-contains-any"?new _s(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ds(e,r):new fs(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sr(t,this.value)):t!==null&&Qe(this.value)===Qe(t)&&this.matchesComparison(sr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return D(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kt=class n extends ar{constructor(e,t){super(),this.filters=e,this.op=t,this.N=null}static create(e,t){return new n(e,t)}matches(e){return(function(r){return r.op==="and"})(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.N!==null||(this.N=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.N}getFilters(){return Object.assign([],this.filters)}};var hs=class extends ae{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},ds=class extends ae{constructor(e,t){super(e,"in",t),this.keys=Lc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},fs=class extends ae{constructor(e,t){super(e,"not-in",t),this.keys=Lc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function Lc(n,e){return(e.arrayValue?.values||[]).map((t=>W.fromName(t.referenceValue)))}var ps=class extends ae{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Dc(t)&&Gt(t.arrayValue,this.value)}},ms=class extends ae{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Gt(this.value.arrayValue,t)}},gs=class extends ae{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gt(this.value.arrayValue,t)}},_s=class extends ae{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Dc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Gt(this.value.arrayValue,r)))}};var Jt=class{constructor(e,t="asc"){this.field=e,this.dir=t}};var G=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new K(0,0))}static max(){return new n(new K(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ys=class n{constructor(e,t){this.comparator=e,this.root=t||fe.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fe.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fe.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){let e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ct(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ct(this.root,e,this.comparator,!1)}getReverseIterator(){return new ct(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ct(this.root,e,this.comparator,!0)}},ct=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fe=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw D(43730,{key:this.key,value:this.value});if(this.right.isRed())throw D(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw D(27949);return e+(this.isRed()?0:1)}};fe.EMPTY=null,fe.RED=!0,fe.BLACK=!1;fe.EMPTY=new class{constructor(){this.size=0}get key(){throw D(57766)}get value(){throw D(16141)}get color(){throw D(16727)}get left(){throw D(29726)}get right(){throw D(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new fe(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var cr=class n{constructor(e){this.comparator=e,this.data=new ys(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ur(this.data.getIterator())}getIteratorFrom(e){return new ur(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ur=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var lr=class n{constructor(e){this.fields=e,e.sort(de.comparator)}static empty(){return new n([])}unionWith(e){let t=new cr(de.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}};var Ie=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ht(t)}setAll(e){let t=de.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ht(o):i.push(a.lastSegment())}));let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Yi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Yi(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Er(t,((i,s)=>e[i]=s));for(let i of r)delete e[i]}clone(){return new n(Ht(this.value))}};var ws=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,G.min(),G.min(),G.min(),Ie.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,G.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,G.min(),G.min(),Ie.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,G.min(),G.min(),Ie.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Is=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.O=null}};function mc(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Is(n,e,t,r,i,s,o)}var hr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.q=null,this.B=null,this.$=null,this.startAt,this.endAt}};function Yf(n){return n.collectionGroup!==null}function Qf(n){let e=wr(n);if(e.q===null){e.q=[];let t=new Set;for(let s of e.explicitOrderBy)e.q.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new cr(de.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((d=>{d.isInequality()&&(a=a.add(d.field))}))})),a})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.q.push(new Jt(s,r))})),t.has(de.keyField().canonicalString())||e.q.push(new Jt(de.keyField(),r))}return e.q}function Xf(n){let e=wr(n);return e.B||(e.B=Zf(e,Qf(n))),e.B}function Zf(n,e){if(n.limitType==="F")return mc(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{let s=i.dir==="desc"?"asc":"desc";return new Jt(i.field,s)}));let t=n.endAt?new or(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new or(n.startAt.position,n.startAt.inclusive):null;return mc(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Es(n,e){let t=n.filters.concat([e]);return new hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nr(e)?"-0":e}}function ep(n,e){return(function(r){return typeof r=="number"&&Number.isInteger(r)&&!nr(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER})(e)?(function(r){return{integerValue:""+r}})(e):Vc(n,e)}var ht=class{constructor(){this._=void 0}},Ts=class extends ht{},vs=class extends ht{constructor(e){super(),this.elements=e}},bs=class extends ht{constructor(e){super(),this.elements=e}},As=class extends ht{constructor(e,t){super(),this.serializer=e,this.k=t}};var Ss=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}},dt=class{},dr=class extends dt{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fr=class extends dt{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}},Rs=class extends dt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ps=class extends dt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var tp={asc:"ASCENDING",desc:"DESCENDING"},np={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rp={and:"AND",or:"OR"},Cs=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ks(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ip(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sp(n,e){return ks(n,e.toTimestamp())}function gc(n){return De(!!n,49232),G.fromTimestamp((function(t){let r=Ye(t);return new K(r.seconds,r.nanos)})(n))}function Gs(n,e){return Ns(n,e).canonicalString()}function Ns(n,e){let t=(function(i){return new U(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Os(n,e){return Gs(n.databaseId,e.path)}function op(n,e){let t=(function(i){let s=U.fromString(i);return De(xc(s),10190,{key:s.toString()}),s})(e);if(t.get(1)!==n.databaseId.projectId)throw new E(T,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new E(T,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W((function(i){return De(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)})(t))}function _c(n,e,t){return{name:Os(n,e),fields:t.value.mapValue.fields}}function ap(n,e){let t;if(e instanceof dr)t={update:_c(n,e.key,e.value)};else if(e instanceof Rs)t={delete:Os(n,e.key)};else if(e instanceof fr)t={update:_c(n,e.key,e.data),updateMask:dp(e.fieldMask)};else{if(!(e instanceof Ps))return D(16599,{L:e.type});t={verify:Os(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){let a=o.transform;if(a instanceof Ts)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof As)return{fieldPath:o.field.canonicalString(),increment:a.k};throw D(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:sp(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:D(27497)})(n,e.precondition)),t}function cp(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=(function(d,g){return Gs(d.databaseId,g)})(n,i);let s=(function(d){if(d.length!==0)return Mc(Kt.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map((g=>(function(y){return{field:at(y.field),direction:up(y.dir)}})(g)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=(function(d,g){return d.useProto3Json||Gf(g)?g:{value:g}})(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{M:t,parent:i}}function up(n){return tp[n]}function lp(n){return np[n]}function hp(n){return rp[n]}function at(n){return{fieldPath:n.canonicalString()}}function Mc(n){return n instanceof ae?(function(t){if(t.op==="=="){if(pc(t.value))return{unaryFilter:{field:at(t.field),op:"IS_NAN"}};if(fc(t.value))return{unaryFilter:{field:at(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pc(t.value))return{unaryFilter:{field:at(t.field),op:"IS_NOT_NAN"}};if(fc(t.value))return{unaryFilter:{field:at(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:at(t.field),op:lp(t.op),value:t.value}}})(n):n instanceof Kt?(function(t){let r=t.getFilters().map((i=>Mc(i)));return r.length===1?r[0]:{compositeFilter:{op:hp(t.op),filters:r}}})(n):D(54877,{filter:n})}function dp(n){let e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xc(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Ks(n){return new Cs(n,!0)}var Ds=class{},Ls=class extends Ds{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.et=!1}rt(){if(this.et)throw new E(lt,"The client has already been terminated.")}I(e,t,r,i){return this.rt(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.I(e,Ns(t,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Qi&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new E($t,s.toString())}))}D(e,t,r,i,s){return this.rt(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.D(e,Ns(t,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Qi&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new E($t,o.toString())}))}terminate(){this.et=!0,this.connection.terminate()}};async function fp(n,e){let t=wr(n),r={writes:e.map((i=>ap(t.serializer,i)))};await t.I("Commit",t.serializer.databaseId,U.emptyPath(),r)}async function pp(n,e){let t=wr(n),{M:r,parent:i}=cp(t.serializer,Xf(e));return(await t.D("RunQuery",t.serializer.databaseId,i,{structuredQuery:r.structuredQuery})).filter((s=>!!s.document)).map((s=>(function(a,c,d){let g=op(a,c.name),w=gc(c.updateTime),y=c.createTime?gc(c.createTime):G.min(),b=new Ie({mapValue:{fields:c.fields}}),v=ws.newFoundDocument(g,w,y,b);return d&&v.setHasCommittedMutations(),d?v.setHasCommittedMutations():v})(t.serializer,s.document,void 0)))}var Uc="ComponentProvider",jt=new Map;function Fc(n){if(n._terminated)throw new E(lt,"The client has already been terminated.");if(!jt.has(n)){Qn(Uc,"Initializing Datastore");let e=(function(s){return new us(s)})((function(s,o,a,c){return new is(s,o,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Rc(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n.app.options.appId||"",n._persistenceKey,n._freezeSettings())),t=Ks(n._databaseId),r=(function(s,o,a,c){return new Ls(s,o,a,c)})(n._authCredentials,n._appCheckCredentials,e,t);jt.set(n,r)}return jt.get(n)}var mp=1048576,Bc="firestore.googleapis.com",yc=!0;var pr=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new E(T,"Can't provide ssl option if host option is not set");this.host=Bc,this.ssl=yc}else this.host=e.host,this.ssl=e.ssl??yc;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mp)throw new E(T,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(r,i,s,o){if(i===!0&&o===!0)throw new E(T,`${r} and ${s} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rc(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new E(T,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new E(T,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new E(T,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ft=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pr({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new E(lt,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new E(lt,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pr(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Xi;switch(r.type){case"firstParty":return new ns(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new E(T,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=jt.get(t);r&&(Qn(Uc,"Removing Datastore"),jt.delete(t),r.terminate())})(this),Promise.resolve()}};function qc(n,e){let t=typeof n=="object"?n:mn(),r=typeof n=="string"?n:e||"(default)",i=bt(t,"firestore/lite").getImmediate({identifier:r});if(!i._initialized){let s=Co("firestore");s&&gp(i,...s)}return i}function gp(n,e,t,r={}){n=Ws(n,ft);let i=ve(e),s=n._getSettings(),o={...s,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;i&&(ln(`https://${a}`),hn("Firestore",!0)),s.host!==Bc&&s.host!==a&&Ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c={...s,host:a,ssl:i,emulatorOptions:r};if(!ce(c,o)&&(n._setSettings(c),r.mockUserToken)){let d,g;if(typeof r.mockUserToken=="string")d=r.mockUserToken,g=H.MOCK_USER;else{d=ko(r.mockUserToken,n._app?.options.projectId);let w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new E(T,"mockUserToken must contain 'sub' or 'user_id' field!");g=new H(w)}n._authCredentials=new Zi(new Xn(d,g))}}var pt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},z=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ee(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Xt(t,n._jsonSchema))return new n(e,r||null,new W(U.fromString(t.referencePath)))}};z._jsonSchemaVersion="firestore/documentReference/1.0",z._jsonSchema={type:re("string",z._jsonSchemaVersion),referencePath:re("string")};var Ee=class n extends pt{constructor(e,t,r){super(e,t,(function(s){return new hr(s)})(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new z(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Js(n,e,...t){if(n=F(n),Ac("collection","path",e),n instanceof ft){let r=U.fromString(e,...t);return ic(r),new Ee(n,null,r)}{if(!(n instanceof z||n instanceof Ee))throw new E(T,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(U.fromString(e,...t));return ic(r),new Ee(n.firestore,null,r)}}function _p(n,e,...t){if(n=F(n),arguments.length===1&&(e=os.newId()),Ac("doc","path",e),n instanceof ft){let r=U.fromString(e,...t);return rc(r),new z(n,null,new W(r))}{if(!(n instanceof z||n instanceof Ee))throw new E(T,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(U.fromString(e,...t));return rc(r),new z(n.firestore,n instanceof Ee?n.converter:null,new W(r))}}var ke=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Le.fromBase64String(e))}catch(t){throw new E(T,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Le.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xt(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ke._jsonSchemaVersion="firestore/bytes/1.0",ke._jsonSchema={type:re("string",ke._jsonSchemaVersion),bytes:re("string")};var Yt=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new E(T,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var mr=class{constructor(e){this._methodName=e}};var Ne=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new E(T,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new E(T,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return L(this._lat,e._lat)||L(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Xt(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ne._jsonSchemaVersion="firestore/geoPoint/1.0",Ne._jsonSchema={type:re("string",Ne._jsonSchemaVersion),latitude:re("number"),longitude:re("number")};var Oe=class n{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xt(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new n(e.vectorValues);throw new E(T,"Expected 'vectorValues' field to be a number array")}}};Oe._jsonSchemaVersion="firestore/vectorValue/1.0",Oe._jsonSchema={type:re("string",Oe._jsonSchemaVersion),vectorValues:re("object")};var yp=/^__.*__$/,Vs=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new dr(e,this.data,t,this.fieldTransforms)}};function $c(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw D(40011,{it:n})}}var Ms=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.st(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get it(){return this.settings.it}ot(e){return new n({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ut(e){let t=this.path?.child(e),r=this.ot({path:t,_t:!1});return r.ct(e),r}lt(e){let t=this.path?.child(e),r=this.ot({path:t,_t:!1});return r.st(),r}ht(e){return this.ot({path:void 0,_t:!0})}ft(e){return gr(e,this.settings.methodName,this.settings.dt||!1,this.path,this.settings.Et)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}st(){if(this.path)for(let e=0;e<this.path.length;e++)this.ct(this.path.get(e))}ct(e){if(e.length===0)throw this.ft("Document fields must not be empty");if($c(this.it)&&yp.test(e))throw this.ft('Document fields cannot begin and end with "__"')}},xs=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ks(e)}Tt(e,t,r,i=!1){return new Ms({it:e,methodName:t,Et:r,path:de.emptyPath(),_t:!1,dt:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Hc(n){let e=n._freezeSettings(),t=Ks(n._databaseId);return new xs(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wp(n,e,t,r,i,s={}){let o=n.Tt(s.merge||s.mergeFields?2:0,e,t,i);Wc("Data must be an object, but it was:",o,r);let a=jc(r,o),c,d;if(s.merge)c=new lr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let g=[];for(let w of s.mergeFields){let y=Ep(e,w,t);if(!o.contains(y))throw new E(T,`Field '${y}' is specified in your field mask but missing from your input data.`);vp(g,y)||g.push(y)}c=new lr(g),d=o.fieldTransforms.filter((w=>c.covers(w.field)))}else c=null,d=o.fieldTransforms;return new Vs(new Ie(a),c,d)}function Ip(n,e,t,r=!1){return Ys(t,n.Tt(r?4:3,e))}function Ys(n,e){if(zc(n=F(n)))return Wc("Unsupported field value:",e,n),jc(n,e);if(n instanceof mr)return(function(r,i){if(!$c(i.it))throw i.ft(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ft(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings._t&&e.it!==4)throw e.ft("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Ys(a,i.ht(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=F(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ep(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=K.fromDate(r);return{timestampValue:ks(i.serializer,s)}}if(r instanceof K){let s=new K(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ks(i.serializer,s)}}if(r instanceof Ne)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ke)return{bytesValue:ip(i.serializer,r._byteString)};if(r instanceof z){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.ft(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gs(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Oe)return(function(o,a){return{mapValue:{fields:{[kc]:{stringValue:Oc},[rr]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw a.ft("VectorValues must only contain numeric values.");return Vc(a.serializer,d)}))}}}}}})(r,i);throw i.ft(`Unsupported field value: ${Ir(r)}`)})(n,e)}function jc(n,e){let t={};return(function(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(i,s))return!1;return!0})(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(n,((r,i)=>{let s=Ys(i,e.ut(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function zc(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof K||n instanceof Ne||n instanceof ke||n instanceof z||n instanceof mr||n instanceof Oe)}function Wc(n,e,t){if(!zc(t)||!Sc(t)){let r=Ir(t);throw r==="an object"?e.ft(n+" a custom object"):e.ft(n+" "+r)}}function Ep(n,e,t){if((e=F(e))instanceof Yt)return e._internalPath;if(typeof e=="string")return Gc(n,e);throw gr("Field path arguments must be of type string or ",n,!1,void 0,t)}var Tp=new RegExp("[~\\*/\\[\\]]");function Gc(n,e,t){if(e.search(Tp)>=0)throw gr(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yt(...e.split("."))._internalPath}catch{throw gr(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gr(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new E(T,a+n+c)}function vp(n,e){return n.some((t=>t.isEqual(e)))}var Us=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new z(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _r(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Kc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},_r=class extends Us{data(){return super.data()}},Fs=class{constructor(e,t){this._docs=t,this.query=e}get docs(){return[...this._docs]}get size(){return this.docs.length}get empty(){return this.docs.length===0}forEach(e,t){this._docs.forEach(e,t)}};function Kc(n,e){return typeof e=="string"?Gc(n,e):e instanceof Yt?e._internalPath:e._delegate._internalPath}var Qt=class{},Bs=class extends Qt{};function Jc(n,e,...t){let r=[];e instanceof Qt&&r.push(e),r=r.concat(t),(function(s){let o=s.filter((c=>c instanceof qs)).length,a=s.filter((c=>c instanceof yr)).length;if(o>1||o>0&&a>0)throw new E(T,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var yr=class n extends Bs{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Qc(e._query,t),new pt(e.firestore,e.converter,Es(e._query,t))}_parse(e){let t=Hc(e.firestore);return(function(s,o,a,c,d,g,w){let y;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new E(T,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Ic(w,g);let v=[];for(let C of w)v.push(wc(c,s,C));y={arrayValue:{values:v}}}else y=wc(c,s,w)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Ic(w,g),y=Ip(a,o,w,g==="in"||g==="not-in");return ae.create(d,g,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Yc(n,e,t){let r=e,i=Kc("where",n);return yr._create(i,r,t)}var qs=class n extends Qt{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Kt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Qc(o,c),o=Es(o,c)})(e._query,t),new pt(e.firestore,e.converter,Es(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function wc(n,e,t){if(typeof(t=F(t))=="string"){if(t==="")throw new E(T,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yf(e)&&t.indexOf("/")!==-1)throw new E(T,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(U.fromString(t));if(!W.isDocumentKey(r))throw new E(T,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dc(n,new W(r))}if(t instanceof z)return dc(n,t._key);throw new E(T,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ir(t)}.`)}function Ic(n,e){if(!Array.isArray(n)||n.length===0)throw new E(T,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qc(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new E(T,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new E(T,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var $s=class{convertValue(e,t="none"){switch(Qe(e)){case 0:return null;case 1:return e.booleanValue;case 2:return V(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw D(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Er(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){let t=e.fields?.[rr].arrayValue?.values?.map((r=>V(r.doubleValue)));return new Oe(t)}convertGeoPoint(e){return new Ne(V(e.latitude),V(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Cc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wt(e));default:return null}}convertTimestamp(e){let t=Ye(e);return new K(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=U.fromString(e);De(xc(r),9688,{name:e});let i=new er(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(t)||js(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function bp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Hs=class extends $s{constructor(e){super(),this.firestore=e}convertBytes(e){return new ke(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new z(this.firestore,null,t)}};function Xc(n){(function(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new E(vc,"limitToLast() queries require specifying at least one orderBy() clause")})((n=Ws(n,pt))._query);let e=Fc(n.firestore),t=new Hs(n.firestore);return pp(e,n._query).then((r=>{let i=r.map((s=>new _r(n.firestore,t,s.key,s,n.converter)));return n._query.limitType==="L"&&i.reverse(),new Fs(n,i)}))}function Zc(n,e){let t=_p(n=Ws(n,Ee)),r=bp(n.converter,e),i=wp(Hc(n.firestore),"addDoc",t._key,r,t.converter!==null,{});return fp(Fc(n.firestore),[i.toMutation(t._key,Ss.exists(!1))]).then((()=>t))}(function(){(function(t){mt=t})(`${Re}_lite`),Se(new te("firestore/lite",((e,{instanceIdentifier:t,options:r})=>{let i=e.getProvider("app").getImmediate(),s=new ft(new es(e.getProvider("auth-internal")),new rs(i,e.getProvider("app-check-internal")),(function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new E(T,'"projectId" not provided in firebase.initializeApp.');return new er(a.options.projectId,c)})(i,t),i);return r&&s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),se("firestore-lite",ec,""),se("firestore-lite",ec,"esm2020")})();var Ap={apiKey:"AIzaSyB5HFmfgZwVx5D8p3DD_1zQ5KyGuiuyKTo",authDomain:"qr-code-generator-971e5.firebaseapp.com",projectId:"qr-code-generator-971e5",storageBucket:"qr-code-generator-971e5.firebasestorage.app",messagingSenderId:"1046685042334",appId:"1:1046685042334:web:0cb63a96320f691e51dd8f"},eu=di(Ap),tu=qc(eu),pe=Wi(eu),Sp=new We,nu=async()=>{try{await zi(pe,Sp)}catch(n){console.error("Login failed",n),alert("Login failed: "+n.message)}},ru=()=>$i(pe),iu=async(n,e,t=null)=>{if(n)try{await Zc(Js(tu,"qrcodes"),{uid:n.uid,text:e,logoBase64:t,createdAt:new Date().toISOString()})}catch(r){console.error("Error adding document: ",r)}},su=async n=>{if(!n)return[];let e=Jc(Js(tu,"qrcodes"),Yc("uid","==",n.uid));return(await Xc(e)).docs.map(r=>({id:r.id,...r.data()}))};var ou=()=>{let n=S("div").cls("flex g-2 aic");return qi(pe,e=>{n.clear(),e?(n.child([S("span").txt(e.displayName||"User").cls("small"),S("button").txt("Logout").cls("btn").on("click",ru)]),document.dispatchEvent(new CustomEvent("app:login",{detail:e}))):(n.child([S("button").txt("Google Login").cls("btn btn-primary").on("click",nu)]),document.dispatchEvent(new CustomEvent("app:logout")))}),S("header").cls("flex jsb aic w-full").css({marginBottom:"var(--s-4)"}).child([S("div").cls("flex aic g-2").child([S("h1").txt("QR Studio").cls("h1"),S("button").txt("\u2600/\u263E").cls("btn").on("click",()=>{document.body.classList.toggle("dark")})]),n])};var al=yl(ol(),1),Dr=async(n,e,t)=>{try{let r=n.getContext("2d");if(await al.default.toCanvas(n,e,{width:300,margin:2,errorCorrectionLevel:"H",color:{dark:"#000000",light:"#ffffff"}}),t){let i=new Image;i.crossOrigin="anonymous";let s,o=!1;t instanceof File||t instanceof Blob?(s=URL.createObjectURL(t),o=!0):s=t,i.onload=()=>{let a=n.width,c=a*.25,d=(a-c)/2,g=(a-c)/2;r.fillStyle="#ffffff";let w=6;r.fillRect(d-w/2,g-w/2,c+w,c+w),r.drawImage(i,d,g,c,c),o&&URL.revokeObjectURL(s)},i.src=s}}catch(r){console.error(r)}},cl=n=>{let e=document.createElement("a");e.download=`qrcode-${Date.now()}.png`,e.href=n.toDataURL(),e.click()},ul=(n,e=150)=>new Promise((t,r)=>{let i=new FileReader;i.onload=s=>{let o=new Image;o.onload=()=>{let a=o.width,c=o.height;a>c?a>e&&(c=Math.round(c*(e/a)),a=e):c>e&&(a=Math.round(a*(e/c)),c=e);let d=document.createElement("canvas");d.width=a,d.height=c,d.getContext("2d").drawImage(o,0,0,a,c);let w=d.toDataURL("image/png",.8);t(w)},o.onerror=r,o.src=s.target.result},i.onerror=r,i.readAsDataURL(n)});var ll=()=>{let n=null,e=S("canvas").id("qr-output").build(),t=S("input").attr({type:"text",placeholder:"Enter URL or text..."}).cls("input"),r=S("input").attr({type:"file",accept:"image/*"}).cls("input").on("change",s=>{s.target.files&&s.target.files[0]&&(n=s.target.files[0])}),i=async()=>{let s=t.element.value;if(!s)return alert("Please enter text");if(await Dr(e,s,n),pe.currentUser){let o=document.querySelector(".btn-primary");o&&(o.textContent="Saving...");try{let a=null;n&&(a=await ul(n,100)),await iu(pe.currentUser,s,a),document.dispatchEvent(new CustomEvent("app:refresh-history"))}catch(a){console.error(a)}finally{o&&(o.textContent="Generate & Save")}}};return S("main").cls("flex f-col g-3 w-full").child([S("div").cls("card flex f-col g-2").child([S("h2").txt("Create QR").cls("h2"),t,S("div").cls("flex f-col").child([S("span").txt("Add Logo (Optional)").cls("small"),r]),S("button").txt("Generate QR Code").cls("btn btn-primary").on("click",i)]),S("div").cls("card flex f-col aic g-3").child([S("div").cls("qr-container").child([e]),S("button").txt("Download PNG").cls("btn").on("click",()=>cl(e))])])};var hl=()=>{let n=S("div").cls("flex f-col g-2"),e=S("div").cls("card hidden").child([S("h2").txt("Your Library").cls("h2"),n]),t=async r=>{n.clear(),e.rmvCls("hidden"),n.child([S("div").txt("Loading...")]);let i=await su(r);if(n.clear(),i.length===0){n.child([S("p").txt("No saved codes yet.").cls("small")]);return}i.forEach(s=>{let o=S("div").cls("flex jsb aic p-1").css({borderBottom:"1px solid var(--border)"}).child([S("span").txt(s.text).css({fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"70%"}),S("button").txt("Load").cls("btn").on("click",()=>{let a=document.getElementById("qr-output"),c=document.querySelector("input[type=text]");c&&(c.value=s.text),a&&Dr(a,s.text,s.logoBase64)})]);n.child([o])})};return document.addEventListener("app:login",r=>t(r.detail)),document.addEventListener("app:refresh-history",()=>{pe.currentUser&&t(pe.currentUser)}),document.addEventListener("app:logout",()=>{e.cls("hidden"),n.clear()}),e};var Im=()=>S("div").cls("container flex f-col g-3").child([ou(),ll(),hl()]);document.body.appendChild(Im().build());})();
